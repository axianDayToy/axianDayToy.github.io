<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>阿羡の博客</title>
  
  
  <link href="https://axiandaytoy.cn/atom.xml" rel="self"/>
  
  <link href="https://axiandaytoy.cn/"/>
  <updated>2022-07-17T12:41:33.094Z</updated>
  <id>https://axiandaytoy.cn/</id>
  
  <author>
    <name>阿羡</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>关于深浅拷贝的那些事</title>
    <link href="https://axiandaytoy.cn/posts/undefined/"/>
    <id>https://axiandaytoy.cn/posts/undefined/</id>
    <published>2022-07-17T11:48:13.000Z</published>
    <updated>2022-07-17T12:41:33.094Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><blockquote><p>所谓深浅拷贝，其实都是进行复制，主要区别在于复制出来的新对象和原来的对象时候会相互影响。<br>深浅拷贝的区分：B 复制 A，如何A 发生变化 B跟着变化 浅拷贝<br>反之， 如果 B 不发生变化 则为深拷贝。<br>浅拷贝 A B 指向同一个地址 所以 A受影响 B也会受影响</p></blockquote><h2 id="深浅拷贝实例"><a href="#深浅拷贝实例" class="headerlink" title="深浅拷贝实例"></a>深浅拷贝实例</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a =[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"><span class="keyword">var</span> a_clone = a;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a === a_clone);</span><br><span class="line">a_clone[<span class="number">0</span>] = <span class="number">5</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a_clone);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br></pre></td></tr></table></figure><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/202207171956464.webp"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,[<span class="number">4</span>,<span class="number">5</span>]];</span><br><span class="line"><span class="keyword">var</span> obj_extend =$.<span class="title function_">extend</span>(<span class="literal">true</span>,&#123;&#125;,obj);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj_extend === obj);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj_extend);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj);</span><br></pre></td></tr></table></figure><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/202207171958427.webp"></p><blockquote><p>要深入了解深浅拷贝必选先要了解其原理，这就不得不说到ECMAScript中的数据类型。</p></blockquote><h2 id="基本类型和引用类型"><a href="#基本类型和引用类型" class="headerlink" title="基本类型和引用类型"></a>基本类型和引用类型</h2><h3 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h3><p>基本类型：undefined,null,布尔值（Boolean）,字符串(String),数值(Number)<br>引用类型：统称为Object类型，细分为：Function、Date、Array、Object类型等。</p><h3 id="不同的数据存储形式"><a href="#不同的数据存储形式" class="headerlink" title="不同的数据存储形式"></a>不同的数据存储形式</h3><p>简单来说, <code>基本数据类型</code>保存在<code>栈内存</code> <code>引用类型</code>保存在<code>堆内存</code></p><h4 id="栈内存"><a href="#栈内存" class="headerlink" title="栈内存"></a>栈内存</h4><p>栈内存中分别存储着变量的标识符以及变量的值</p><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/202207172005295.webp" alt="1"></p><p>即：<code>var a = &quot;A&quot;</code></p><p>在栈内存中是这样的</p><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/202207172005125.webp" alt="2"></p><h4 id="堆内存"><a href="#堆内存" class="headerlink" title="堆内存"></a>堆内存</h4><p>栈内存存储的是变量的标识符以及对象在堆内存中的存储地址，但需要访问引用类型（对象、数组等）的值时，首先需要从栈中获得该对象的地址指针，然后再从对应的堆内存中取得所需的数据。</p><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/202207172006729.webp" alt="3"></p><p>即：<code>var a = &#123;name:“jack”&#125;;</code></p><p>在内存中是这样的：</p><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/202207172007554.webp" alt="4"></p><h3 id="不同类型的复制形式"><a href="#不同类型的复制形式" class="headerlink" title="不同类型的复制形式"></a>不同类型的复制形式</h3><p>基本类型的复制：当你在复制时，相当于把值也一并复制给了新的变量</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">var</span> b = a;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a === b);</span><br><span class="line"><span class="keyword">var</span> a = <span class="number">2</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b);</span><br></pre></td></tr></table></figure><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/202207172009891.webp" alt="5"></p><p>改变a的值，并不会影响到b。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a =<span class="number">1</span></span><br></pre></td></tr></table></figure><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/202207172010921.webp" alt="6"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> b = a;</span><br></pre></td></tr></table></figure><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/202207172011229.webp" alt="7"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">2</span>;</span><br></pre></td></tr></table></figure><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/202207172012935.webp" alt="8"></p><p>引用类型：当复制引用类型时，实际上只是赋值起指向的内存地址，即原来的变量与复制的新变量指向了同一个东西</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a =&#123;<span class="attr">name</span>:<span class="string">&quot;jack&quot;</span>,<span class="attr">age</span>:<span class="number">20</span>&#125;;</span><br><span class="line"><span class="keyword">var</span> b = a;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a === b);</span><br><span class="line">a.<span class="property">age</span> =<span class="number">30</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b)</span><br></pre></td></tr></table></figure><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/202207172013025.webp" alt="9"></p><p>可以看得出来：改变a的值，也会影响b的值</p><p>内存中是这样的</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> b = a;</span><br></pre></td></tr></table></figure><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/202207172014449.webp" alt="10"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> b = a;</span><br></pre></td></tr></table></figure><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/202207172014798.webp" alt="11"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a.<span class="property">age</span> = <span class="number">30</span>;</span><br></pre></td></tr></table></figure><p><img src="/Users/yhji/Desktop/11.webp" alt="11"><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/202207172015470.webp" alt="12"> </p><blockquote><p>看完上面之后，是不是就明白了。所谓深浅拷贝：<br>对于仅仅是复制了引用（地址）,换言之，原来的变量和新的变量指向了同一个东西，彼此之间的操作会互相影响，为<code>浅拷贝</code>。<br>反言之。如果是在堆中重新分配内存，拥有不同的地址，但是值是一样的，复制后的对象与原来的对象是完全隔离，互不影响的，为 <code>深拷贝</code></p></blockquote><p><strong>深浅拷贝的主要区别：复制的是引用（地址）还是复制的是实例。</strong></p><h2 id="实现深拷贝方式"><a href="#实现深拷贝方式" class="headerlink" title="实现深拷贝方式"></a>实现深拷贝方式</h2><h3 id="利用递归方式-对属性中所有的引用类型的值，遍历到是基本类型的值为止。"><a href="#利用递归方式-对属性中所有的引用类型的值，遍历到是基本类型的值为止。" class="headerlink" title="利用递归方式 对属性中所有的引用类型的值，遍历到是基本类型的值为止。"></a>利用递归方式 对属性中所有的引用类型的值，遍历到是基本类型的值为止。</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">deepCLone</span>(<span class="params">obj</span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> targetObj = <span class="title class_">Array</span>.<span class="title function_">isArray</span>(obj)?[]:&#123;&#125;;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> keys <span class="keyword">in</span> obj)&#123;</span><br><span class="line">        <span class="keyword">if</span>(obj.<span class="title function_">hasOwnProperty</span>(keys))&#123;</span><br><span class="line">            <span class="keyword">if</span>(obj[keys] &amp;&amp; <span class="keyword">typeof</span> obj[keys] === <span class="string">&#x27;object&#x27;</span>)&#123;</span><br><span class="line">                targetObj[keys] = <span class="title function_">deepCLone</span>(obj[keys])</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                targetObj[keys] = obj[keys]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> targetObj</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a =&#123;<span class="attr">name</span>:<span class="string">&quot;jack&quot;</span>,<span class="attr">age</span>:<span class="number">20</span>&#125;;</span><br><span class="line"><span class="keyword">var</span> b = <span class="title function_">deepCLone</span>(a);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b ===a);</span><br><span class="line">a.<span class="property">age</span> = <span class="number">30</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b);</span><br></pre></td></tr></table></figure><p>![]<img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/202207172027976.webp" alt="13"></p><h3 id="jQuery中的-extend复制方法"><a href="#jQuery中的-extend复制方法" class="headerlink" title="jQuery中的 extend复制方法"></a>jQuery中的 extend复制方法</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;<span class="attr">name</span>:<span class="string">&quot;xixi&quot;</span>,<span class="attr">age</span>:<span class="number">20</span>,<span class="attr">company</span>:&#123;<span class="attr">name</span>:<span class="string">&quot;腾讯&quot;</span>,<span class="attr">address</span>:<span class="string">&quot;深圳&quot;</span>&#125;&#125;;</span><br><span class="line"><span class="keyword">var</span> obj_extend =$.<span class="title function_">extend</span>(<span class="literal">true</span>,&#123;&#125;,obj);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj === obj_extend);</span><br><span class="line">obj.<span class="property">company</span>.<span class="property">name</span>=<span class="string">&quot;阿里&quot;</span>;</span><br><span class="line">obj.<span class="property">name</span>=<span class="string">&quot;albabba&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj_extend);</span><br></pre></td></tr></table></figure><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/202207172028621.webp" alt="14"></p><h3 id="浅拷贝"><a href="#浅拷贝" class="headerlink" title="浅拷贝"></a>浅拷贝</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;<span class="attr">name</span>:<span class="string">&quot;xixi&quot;</span>,<span class="attr">age</span>:<span class="number">20</span>,<span class="attr">company</span>:&#123;<span class="attr">name</span>:<span class="string">&quot;腾讯&quot;</span>,<span class="attr">address</span>:<span class="string">&quot;深圳&quot;</span>&#125;&#125;;</span><br><span class="line"><span class="keyword">var</span> obj_extend =$.<span class="title function_">extend</span>(<span class="literal">false</span>,&#123;&#125;,obj);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj === obj_extend);</span><br><span class="line">obj.<span class="property">company</span>.<span class="property">name</span>=<span class="string">&quot;阿里&quot;</span>;</span><br><span class="line">obj.<span class="property">name</span>=<span class="string">&quot;albabba&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj_extend);</span><br></pre></td></tr></table></figure><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/202207172031831.webp" alt="15"></p><blockquote><p>从company的变化可以看出，貌似是浅拷贝，但是name又貌似是深拷贝，这是何解。</p></blockquote><blockquote><p>其实，Array的slice 和concat方法和jQuery中的extend复制方法，都是会复制第一层的值，对于第一层的值都是深拷贝，而到第二层的时候 Array的slice和concat方法就是复制引用，jQuery中的extend复制方法则取决于你的第一个参数，也就是时候进行递归复制。<br>所谓第一层 就是 key所对应的value值是基本数据类型，也就是像实例中的name，age，而对于value值是引用类型 则为第二层，也就是像上面的company。顺便 我们可以试一下 slice 和concat</p></blockquote><h3 id="slice"><a href="#slice" class="headerlink" title="slice"></a>slice</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a =[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="keyword">var</span>  b = a.<span class="title function_">slice</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b === a);</span><br><span class="line">a[<span class="number">0</span>] = <span class="number">4</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b);</span><br></pre></td></tr></table></figure><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/202207172033739.webp" alt="16"></p><h3 id="concat"><a href="#concat" class="headerlink" title="concat"></a>concat</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a =[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="keyword">var</span>  b = a.<span class="title function_">concat</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b === a);</span><br><span class="line">a[<span class="number">0</span>] = <span class="number">4</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b);</span><br></pre></td></tr></table></figure><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/202207172033739.webp"></p><p>看似是深拷贝，其实不然，下面的例子就说明了一切</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a =[[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],<span class="number">4</span>,<span class="number">5</span>];</span><br><span class="line"><span class="keyword">var</span> b= a.<span class="title function_">slice</span>();</span><br><span class="line">a[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">6</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b);</span><br></pre></td></tr></table></figure><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/202207172035826.webp"></p><blockquote><p>这就很明显的看出来了，上面所述，第一层是深拷贝 第二层 是引用。</p></blockquote><h3 id="JSON对象的parse和stringify"><a href="#JSON对象的parse和stringify" class="headerlink" title="JSON对象的parse和stringify"></a>JSON对象的parse和stringify</h3><p><strong>JSON对象中的stringify可以把一个js对象序列化为一个JSON字符串，parse可以把JSON字符串反序化为一个js对象，这两个方法实现的是深拷贝</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj =&#123;<span class="attr">name</span>:<span class="string">&#x27;xixi&#x27;</span>,<span class="attr">age</span>:<span class="number">20</span>,<span class="attr">company</span>:&#123;<span class="attr">name</span>:<span class="string">&#x27;TX&#x27;</span>,<span class="attr">address</span>:<span class="string">&#x27;深圳&#x27;</span>&#125;&#125;;</span><br><span class="line"><span class="keyword">var</span> obj_json = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(obj));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj === obj_json);</span><br><span class="line">obj.<span class="property">name</span>=<span class="string">&quot;ali&quot;</span>;</span><br><span class="line">obj.<span class="property">company</span>.<span class="property">name</span>=<span class="string">&quot;AL&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj_json);</span><br></pre></td></tr></table></figure><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/202207172037787.webp" alt="18"></p>]]></content>
    
    
    <summary type="html">关于深浅拷贝的那些事</summary>
    
    
    
    <category term="JS" scheme="https://axiandaytoy.cn/categories/JS/"/>
    
    
    <category term="JS" scheme="https://axiandaytoy.cn/tags/JS/"/>
    
  </entry>
  
  <entry>
    <title>vue使用ElementUI table实现展开行功能</title>
    <link href="https://axiandaytoy.cn/posts/4259e36d/"/>
    <id>https://axiandaytoy.cn/posts/4259e36d/</id>
    <published>2022-07-08T12:05:12.000Z</published>
    <updated>2022-07-09T06:18:44.962Z</updated>
    
    <content type="html"><![CDATA[<h2 id="最终效果"><a href="#最终效果" class="headerlink" title="最终效果"></a>最终效果</h2><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/202207082027377.gif" alt="result"></p><h3 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h3><blockquote><p>当行内容过多并且不想显示横向滚动条时 或者是需要展示当前物品下所属的资产时 可以使用 Table 展开行功能。</p></blockquote><h2 id="重点参数"><a href="#重点参数" class="headerlink" title="重点参数"></a>重点参数</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">expand-change：</span> <span class="string">当用户对某一行展开或者关闭的时候会触发该事件（展开行时，回调的第二个参数为</span> <span class="string">expandedRows：树形表格时第二参数为</span> <span class="string">expanded）</span></span><br><span class="line"><span class="string">expandedRows：其实就只当前展开行的合集。</span></span><br><span class="line"><span class="string">type：</span> <span class="string">对应列的类型。如果设置了</span> <span class="string">selection</span> <span class="string">则显示多选框；如果设置了</span> <span class="string">index</span> <span class="string">则显示该行的索引（从</span> <span class="number">1</span> <span class="string">开始计算）；如果设置了</span> <span class="string">expand</span> <span class="string">则显示为一个可展开的按钮。</span></span><br><span class="line"><span class="string">toggleRowExpansion：用于可展开表格与树形表格，切换某一行的展开状态，如果使用了第二个参数，则是设置这一行展开与否</span>  <span class="string">参数(row,expanded</span> <span class="string">expanded</span> <span class="string">为</span> <span class="literal">true</span> <span class="string">则展开)</span></span><br></pre></td></tr></table></figure><h2 id="代码示例"><a href="#代码示例" class="headerlink" title="代码示例"></a>代码示例</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-table</span> <span class="attr">fit</span> <span class="attr">border</span> <span class="attr">size</span>=<span class="string">&quot;small&quot;</span>  <span class="attr">:data</span>=<span class="string">&quot;deviceList&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataTreeList&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%&quot;</span>  @<span class="attr">expand-change</span>=<span class="string">&quot;handleExpandChange&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">type</span>=<span class="string">&quot;expand&quot;</span>&gt;</span></span><br><span class="line">    // 如果表头需要统一管理按钮 可加入以下代码</span><br><span class="line">      <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot</span>=<span class="string">&quot;header&quot;</span> <span class="attr">slot-scope</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;toggleRowExpansion&quot;</span>&gt;</span>&#123;&#123; isExpansion ? &quot;关闭&quot; : &quot;展开&quot; &#125;<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">&quot;scope&quot;</span>&gt;</span>加入需要折叠的代码<span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-table</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">    /** 表格展开与关闭 */</span><br><span class="line">    toggleRowExpansion()&#123;</span><br><span class="line">      if(this.deviceList.length)&#123;</span><br><span class="line">        this.isExpansion = !this.isExpansion;</span><br><span class="line">        this.toggleRowExpansionAll(this.deviceList, this.isExpansion);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    toggleRowExpansionAll(data, isExpansion) &#123;</span><br><span class="line">      data.forEach((item) =&gt; &#123;</span><br><span class="line">        this.$refs.dataTreeList.toggleRowExpansion(item, isExpansion);</span><br><span class="line">        if (item.children !== undefined &amp;&amp; item.children !== null) &#123;</span><br><span class="line">          this.toggleRowExpansionAll(item.children, isExpansion);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">  // 判断是否所有行都展开或者关闭</span><br><span class="line">  handleExpandChange(row,rows)&#123;</span><br><span class="line">    if(this.deviceList.length == rows.length)&#123;</span><br><span class="line">         this.isExpansion = true</span><br><span class="line">   &#125;else&#123;</span><br><span class="line">        this.isExpansion = false</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">vue使用ElementUI table实现展开行功能</summary>
    
    
    
    <category term="Vue" scheme="https://axiandaytoy.cn/categories/Vue/"/>
    
    
    <category term="Vue" scheme="https://axiandaytoy.cn/tags/Vue/"/>
    
  </entry>
  
  <entry>
    <title>hexo Butterfly 添加豆瓣插件</title>
    <link href="https://axiandaytoy.cn/posts/c144adc/"/>
    <id>https://axiandaytoy.cn/posts/c144adc/</id>
    <published>2022-06-10T12:28:35.000Z</published>
    <updated>2022-06-26T11:45:34.926Z</updated>
    
    <content type="html"><![CDATA[<h2 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h2><div class="tip home faa-horizontal animated"><p>闲来无事，瞎琢磨着玩</p></div><h2 id="安装并使用"><a href="#安装并使用" class="headerlink" title="安装并使用"></a>安装并使用</h2><ol><li><p>在博客根目录下，打开命令窗口执行安装命令。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-butterfly-douban --save</span><br></pre></td></tr></table></figure><div class="note warning flat"><p>注意 如果不是Butterfly 需要安装 <code>npm install hexo-douban --save</code></p></div></li><li><p>修改站点配置文件，加入如下代码：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">douban:</span></span><br><span class="line">  <span class="attr">user:</span> <span class="string">你的豆瓣ID</span></span><br><span class="line">  <span class="attr">builtin:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">book:</span></span><br><span class="line">    <span class="attr">title:</span> <span class="string">&#x27;风停在窗边嘱咐你要热爱这个世界&#x27;</span></span><br><span class="line">    <span class="attr">quote:</span> <span class="string">&#x27;读完时间已久远，在此时只是作为归纳。&#x27;</span></span><br><span class="line">  <span class="attr">movie:</span></span><br><span class="line">    <span class="attr">title:</span> <span class="string">&#x27;下雨天打孩子 闲着也是闲着&#x27;</span></span><br><span class="line">    <span class="attr">quote:</span> <span class="string">&#x27;看完时间已久远，在此时只是作为归纳。&#x27;</span></span><br><span class="line">  <span class="attr">timeout:</span> <span class="number">10000</span> </span><br></pre></td></tr></table></figure><ul><li>user: 你的豆瓣ID。打开豆瓣，登入账户，然后在右上角点击 ”个人主页“，这时候地址栏的URL大概是这样：<a href="https://www.douban.com/people/xxxxxx/">https://www.douban.com/people/xxxxxx/</a> ，其中的”xxxxxx”就是你的个人ID了。</li><li>builtin: 是否将生成页面的功能嵌入 hexo s 和 hexo g 中，默认是 false ，另一可选项为 true 。</li><li>title: 该页面的标题。</li><li>quote: 写在页面开头的一段话,支持html语法。</li><li>timeout: 爬取数据的超时时间，默认是 10000ms，如果在使用时发现报了超时的错(ETIMEOUT)可以把这个数据设置的大一点。</li></ul><div class="note info flat"><p>如果只想显示某一个页面(比如movie)，那就把其他的配置项注释掉即可。</p></div></li><li><p>使用</p><div class="tip info"><p>如果你有使用hexo-douban，可配置這個</p></div></li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">douban:</span></span><br><span class="line">  <span class="attr">meta:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">movies_img:</span> <span class="string">https://fastly.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/movie.jpg</span></span><br><span class="line">  <span class="attr">books_img:</span> <span class="string">https://fastly.jsdelivr.net/npm/blog-gallery@1.0.0/1/20200206161657.webp</span></span><br></pre></td></tr></table></figure><p>然后前往博客根目录 输入如下命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page books</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page movies</span><br></pre></td></tr></table></figure><p>然后分别找到刚新建的文件夹下的<code>.md</code>文件 </p><div class="tabs" id="test4"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test4-1">books下的.md文件</button></li><li class="tab"><button type="button" data-href="#test4-2">movies下的.md文件</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test4-1"><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">title: books</span><br><span class="line">author: 阿羡</span><br><span class="line"><span class="addition">+ type: &quot;books&quot;</span></span><br><span class="line">date: 2022-06-09 21:04:37</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test4-2"><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">title: movies</span><br><span class="line">author: 阿羡</span><br><span class="line"><span class="addition">+ type: &quot;movies&quot;</span></span><br><span class="line">date: 2022-06-09 21:05:29</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><p>最后 只需要在豆瓣中添加已读、已看的书籍和影片就可以啦。<a href="https://blog.csdn.net/qq_44752641/article/details/119523132">顺便贴一个表情收集页</a> 需要的小伙伴可以食用哦。🎉🎉</p>]]></content>
    
    
    <summary type="html">hexo Butterfly 添加豆瓣插件</summary>
    
    
    
    <category term="Butterfly主题" scheme="https://axiandaytoy.cn/categories/Butterfly%E4%B8%BB%E9%A2%98/"/>
    
    
    <category term="Butterfly主题" scheme="https://axiandaytoy.cn/tags/Butterfly%E4%B8%BB%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>JOSN.parse(JSON.stringify(obj))实现深拷贝的弊端</title>
    <link href="https://axiandaytoy.cn/posts/fc808795/"/>
    <id>https://axiandaytoy.cn/posts/fc808795/</id>
    <published>2022-06-04T14:54:14.000Z</published>
    <updated>2022-06-26T10:09:30.820Z</updated>
    
    <content type="html"><![CDATA[<ol><li><p>🍬 如果 obj 里面有时间对象，则<code>JSON.stringify</code>后再<code>JSON.parse</code>的结果，时间将只是字符串的形式；而不是时间对象。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> test = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;a&quot;</span>,</span><br><span class="line">  <span class="attr">date</span>: [<span class="keyword">new</span> <span class="title class_">Date</span>(<span class="number">153662760000</span>), <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="number">15400476000000</span>)],</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> b;</span><br><span class="line">b = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(test));</span><br></pre></td></tr></table></figure><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/202206042307.webp" alt="test和b的结果"></p><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/202206042308.webp"></p></li><li><p>🍡 如果 obj 里有 RegExp 、Error 对象，则序列化的结果只得到空对象。</p><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/202206042309.webp"></p></li><li><p>🍢 如果 obj 里有函数， undefined ，则序列化的结果会把函数或 undefined 丢失。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> test = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;a&quot;</span>,</span><br><span class="line">  <span class="attr">date</span>: <span class="keyword">function</span> <span class="title function_">hehe</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;肖战&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> copyed = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(test));</span><br><span class="line">test.<span class="property">name</span> = <span class="string">&quot;魏无羡&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;debugger&quot;</span>, test, copyed);</span><br></pre></td></tr></table></figure><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/202206042310.webp" alt="函数"></p><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/202206042311.webp" alt="undefined"></p></li><li><p>🍦 如果 obj 里有 NaN、infinity 和-Infinity，则序列化的结果会变为 null</p><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/202206042312.webp" alt="NaN"></p></li><li><p>🍊 <code>JSON.stringify()</code>只能序列化对象的可枚举的自有属性，例如：如果 obj 中的对象是由构造函数生成的，则使用<code>JSON.parse(JSON.stringify(obj))</code>深拷贝后，会丢弃对象<code>constructor</code>;</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(name);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> xiaozhan = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;xiaozhan&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> test = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;肖战&quot;</span>,</span><br><span class="line">  <span class="attr">date</span>: xiaozhan,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> copyed = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(test));</span><br><span class="line">test.<span class="property">name</span> = <span class="string">&quot;魏无羡&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;debugger&quot;</span>, test, copyed);</span><br></pre></td></tr></table></figure><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/202206042313.webp"></p></li><li><p>🍅 如果对象中存在循环引用的情况也是无法正确实现深拷贝。</p><blockquote><p>以上，如果拷贝的对象不涉及上面的情况，可以使用<code>JSON.parse(JSON.stringify(obj))</code>实现深拷贝，但是涉及上面的情况，可以考虑使用下面的方式实现。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 实现深拷贝函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">deepClone</span>(<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> type = <span class="variable language_">this</span>.<span class="title function_">judgeType</span>(data);</span><br><span class="line">  <span class="keyword">let</span> obj = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">if</span> (type === <span class="string">&quot;array&quot;</span>) &#123;</span><br><span class="line">    obj = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; data.<span class="property">length</span>; i++) &#123;</span><br><span class="line">      obj.<span class="title function_">push</span>(<span class="variable language_">this</span>.<span class="title function_">deepClone</span>(data[i]));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">&quot;object&quot;</span>) &#123;</span><br><span class="line">    obj = &#123;&#125;;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> data) &#123;</span><br><span class="line">      <span class="keyword">if</span> (data.<span class="title function_">hasOwnProperty</span>(key)) &#123;</span><br><span class="line">        obj[key] = <span class="variable language_">this</span>.<span class="title function_">deepClone</span>(data[key]);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> data;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">judgeType</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> toString = <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>;</span><br><span class="line">  <span class="keyword">const</span> map = &#123;</span><br><span class="line">    <span class="string">&quot;[object Boolean]&quot;</span>: <span class="string">&quot;boolean&quot;</span>,</span><br><span class="line">    <span class="string">&quot;[object Number]&quot;</span>: <span class="string">&quot;number&quot;</span>,</span><br><span class="line">    <span class="string">&quot;[object String]&quot;</span>: <span class="string">&quot;string&quot;</span>,</span><br><span class="line">    <span class="string">&quot;[object Function]&quot;</span>: <span class="string">&quot;function&quot;</span>,</span><br><span class="line">    <span class="string">&quot;[object Array]&quot;</span>: <span class="string">&quot;array&quot;</span>,</span><br><span class="line">    <span class="string">&quot;[object Date]&quot;</span>: <span class="string">&quot;date&quot;</span>,</span><br><span class="line">    <span class="string">&quot;[object RegExp]&quot;</span>: <span class="string">&quot;regExp&quot;</span>,</span><br><span class="line">    <span class="string">&quot;[object Undefined]&quot;</span>: <span class="string">&quot;undefined&quot;</span>,</span><br><span class="line">    <span class="string">&quot;[object Null]&quot;</span>: <span class="string">&quot;null&quot;</span>,</span><br><span class="line">    <span class="string">&quot;[object Object]&quot;</span>: <span class="string">&quot;object&quot;</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">if</span> (obj <span class="keyword">instanceof</span> <span class="title class_">Element</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;element&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> map[toString.<span class="title function_">call</span>(obj)];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> test = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;a&quot;</span>,</span><br><span class="line">  <span class="attr">date</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">deepClone</span>(test));</span><br><span class="line">test.<span class="property">date</span>[<span class="number">0</span>] = <span class="number">4</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(test);</span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;ol&gt;
&lt;li&gt;&lt;p&gt;🍬 如果 obj 里面有时间对象，则&lt;code&gt;JSON.stringify&lt;/code&gt;后再&lt;code&gt;JSON.parse&lt;/code&gt;的结果，时间将只是字符串的形式；而不是时间对象。&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;</summary>
      
    
    
    
    <category term="JS" scheme="https://axiandaytoy.cn/categories/JS/"/>
    
    
    <category term="JS" scheme="https://axiandaytoy.cn/tags/JS/"/>
    
  </entry>
  
  <entry>
    <title>使用Wow.js给页面添加动画</title>
    <link href="https://axiandaytoy.cn/posts/77e3f859/"/>
    <id>https://axiandaytoy.cn/posts/77e3f859/</id>
    <published>2022-06-03T10:18:49.000Z</published>
    <updated>2022-07-09T08:26:44.194Z</updated>
    
    <content type="html"><![CDATA[<h2 id="插件安装"><a href="#插件安装" class="headerlink" title="插件安装"></a>插件安装</h2><details class="folding-tag" green open><summary> 安装插件即可使用 </summary>              <div class='content'>              <ol><li><p>安装插件,在博客根目录<code>[Blogroot]</code>下打开终端，运行以下指令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-butterfly-wowjs --save</span><br></pre></td></tr></table></figure></li><li><p>添加配置信息 在站点配置文件<code>_config.yml</code>或者主题配置文件<code>_config.butterfly.yml</code>中添加</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">wowjs:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment">#控制动画开关。true是打开，false是关闭</span></span><br><span class="line">  <span class="attr">priority:</span> <span class="number">10</span> <span class="comment">#过滤器优先级</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">false</span> <span class="comment">#移动端是否启用，默认移动端禁用</span></span><br><span class="line">  <span class="attr">animateitem:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">recent-post-item</span> <span class="comment">#必填项，需要添加动画的元素的class</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__zoomIn</span> <span class="comment">#必填项，需要添加的动画</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="string">2s</span> <span class="comment">#选填项，动画持续时间，单位可以是ms也可以是s。例如3s，700ms。</span></span><br><span class="line">      <span class="attr">delay:</span> <span class="string">1s</span> <span class="comment">#选填项，动画开始的延迟时间，单位可以是ms也可以是s。例如3s，700ms。</span></span><br><span class="line">      <span class="attr">offset:</span> <span class="number">100</span> <span class="comment">#选填项，开始动画的距离（相对浏览器底部）</span></span><br><span class="line">      <span class="attr">iteration:</span> <span class="number">2</span> <span class="comment">#选填项，动画重复的次数</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">card-widget</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__zoomIn</span></span><br><span class="line"><span class="attr">animate_css:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/animate.min.css</span></span><br><span class="line"><span class="attr">wow_js:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow.min.js</span></span><br><span class="line"><span class="attr">wow_init_js:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow_init.js</span></span><br></pre></td></tr></table></figure></li><li><p>参数释义</p></li></ol><table><thead><tr><th align="left">参数</th><th align="left">备选值&#x2F;类型</th><th align="left">释义</th></tr></thead><tbody><tr><td align="left">enable</td><td align="left">true&#x2F;false</td><td align="left">【必选】控制开关</td></tr><tr><td align="left">priority</td><td align="left">number</td><td align="left">【可选】过滤器优先级，数值越小，执行越早，默认为 10，选填</td></tr><tr><td align="left">mobile</td><td align="left">true&#x2F;false</td><td align="left">控制移动端是否启用，默认移动端禁用</td></tr><tr><td align="left">animateitem.class</td><td align="left">class</td><td align="left">【可选】添加动画类名，只支持给 class 添加</td></tr><tr><td align="left">animateitem.style</td><td align="left">text</td><td align="left">【可选】动画样式，具体类型参考<a href="https://animate.style/">animate.css</a></td></tr><tr><td align="left">animateitem.duration</td><td align="left">time,单位为 s 或 ms</td><td align="left">【可选】动画持续时间，单位可以是 ms 也可以是 s。例如 3s，700ms。</td></tr><tr><td align="left">animateitem.delay</td><td align="left">time,单位为 s 或 ms</td><td align="left">【可选】动画开始的延迟时间，单位可以是 ms 也可以是 s。例如 3s，700ms。</td></tr><tr><td align="left">animateitem.offset</td><td align="left">number,单位为 px</td><td align="left">【可选】开始动画的距离（相对浏览器底部）。</td></tr><tr><td align="left">animateitem.iteration</td><td align="left">number,单位为 s 或 ms</td><td align="left">【可选】动画重复的次数</td></tr><tr><td align="left">animate_css</td><td align="left">URL</td><td align="left">【可选】animate.css 的 CDN 链接,默认为<code>https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/animate.min.css</code></td></tr><tr><td align="left">wow_js</td><td align="left">URL</td><td align="left">【可选】wow.min.js 的 CDN 链接,默认为<code>https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow.min.js</code></td></tr><tr><td align="left">wow_init_js</td><td align="left">URL</td><td align="left">【可选】wow_init.js 的 CDN 链接,默认为<code>https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow_init.js</code></td></tr></tbody></table><div class="tabs" id="test4"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test4-1">标签语法</button></li><li class="tab"><button type="button" data-href="#test4-2">参数配置</button></li><li class="tab"><button type="button" data-href="#test4-3">样式预览</button></li><li class="tab"><button type="button" data-href="#test4-4">示例源码</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test4-1"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% wow [animete],[duration],[delay],[offset],[iteration] %&#125;</span><br><span class="line">内容</span><br><span class="line">&#123;% endwow %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test4-2"><ol><li><code>animate</code>: 动画样式，效果详见<a href="https://animate.style/">animate.css 参考文档</a></li><li><code>duration</code>: 选填项，动画持续时间，单位可以是<code>ms</code>也可以是<code>s</code>。例如<code>3s</code>，<code>700ms</code>。</li><li><code>delay</code>: 选填项，动画开始的延迟时间，单位可以是<code>ms</code>也可以是<code>s</code>。例如<code>3s</code>，<code>700ms</code>。</li><li><code>offset</code>: 选填项，开始动画的距离（相对浏览器底部）</li><li><code>iteration</code>: 选填项，动画重复的次数。</li></ol><div class="note warning flat"><p>注意，后面四个虽然是选填项，但是当有跨位选填时，次序不能乱。详见示例。</p><p>支持嵌套其他外挂标签。</p></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test4-3"><p>1.<code>flip</code>动画效果。</p><div class='wow animate__flip' data-wow-duration='' data-wow-delay='' data-wow-offset=''  data-wow-iteration='' ><div class="note green icon-padding modern"><i class="note-icon fas fa-fan"></i><p><code>flip</code>动画效果。</p></div></div><p>2.<code>zoomIn</code>动画效果，持续<code>5s</code>，延时<code>5s</code>，离底部<code>100</code>距离时启动，重复<code>10</code>次。</p><div class='wow animate__zoomIn' data-wow-duration='5s' data-wow-delay='5s' data-wow-offset='100'  data-wow-iteration='10' ><div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p><code>zoomIn</code>动画效果，持续<code>5s</code>，延时<code>5s</code>，离底部<code>100</code>距离时启动，重复<code>10</code>次</p></div></div><p>3.<code>slideInRight</code>动画效果，持续<code>5s</code>，延时<code>5s</code>。</p><div class='wow animate__slideInRight' data-wow-duration='5s' data-wow-delay='5s' data-wow-offset=''  data-wow-iteration='' ><div class="note orange icon-padding modern"><i class="note-icon fas fa-car"></i><p><code>slideInRight</code>动画效果，持续<code>5s</code>，延时<code>5s</code>。</p></div></div><p>4.<code>heartBeat</code>动画效果，延时<code>5s</code>，重复<code>10</code>次。此处注意不用的参数位置要留空，用逗号间隔。</p><div class='wow animate__heartBeat' data-wow-duration='' data-wow-delay='5s' data-wow-offset=''  data-wow-iteration='10' ><div class="note red icon-padding modern"><i class="note-icon fas fa-battery-half"></i><p><code>heartBeat</code>动画效果，延时<code>5s</code>，重复<code>10</code>次。</p></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test4-4"><ol><li><p>flip 动画效果。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% wow animate__flip %&#125;</span><br><span class="line">&#123;% note green &#x27;fas fa-fan&#x27; modern%&#125;</span><br><span class="line">`flip`动画效果。</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% endwow %&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>zoomIn</code>动画效果，持续<code>5s</code>，延时<code>5s</code>，离底部<code>100</code>距离时启动，重复<code>10</code>次。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% wow animate__zoomIn,5s,5s,100,10 %&#125;</span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; modern%&#125;</span><br><span class="line">`zoomIn`动画效果，持续`5s`，延时`5s`，离底部`100`距离时启动，重复`10`次</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% endwow %&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>slideInRight</code>动画效果，持续<code>5s</code>，延时<code>5s</code>。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% wow animate__slideInRight,5s,5s %&#125;</span><br><span class="line">&#123;% note orange &#x27;fas fa-car&#x27; modern%&#125;</span><br><span class="line">`slideInRight`动画效果，持续`5s`，延时`5s`。</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% endwow %&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>heartBeat</code>动画效果，延时<code>5s</code>，重复<code>10</code>次。此处注意不用的参数位置要留空，用逗号间隔。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% wow animate__heartBeat,,5s,,10 %&#125;</span><br><span class="line">&#123;% note red &#x27;fas fa-battery-half&#x27; modern%&#125;</span><br><span class="line">`heartBeat`动画效果，延时`5s`，重复`10`次。</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% endwow %&#125;</span><br></pre></td></tr></table></figure></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><h2 id="基础应用"><a href="#基础应用" class="headerlink" title="基础应用"></a>基础应用</h2><details class="folding-tag" green><summary> 若您不想修改源码，只需使用基础引用方案即可 </summary>              <div class='content'>              <ol><li><p>新建<code>[Blogroot]\themes\butterfly\source\js\wow_init.js</code>，配置特性动画的默认项。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">wow = <span class="keyword">new</span> <span class="title function_">WOW</span>(&#123;</span><br><span class="line">  <span class="attr">boxClass</span>: <span class="string">&quot;wow&quot;</span>,</span><br><span class="line">  <span class="comment">// 当用户滚动时显示隐藏框的类名称</span></span><br><span class="line">  <span class="attr">animateClass</span>: <span class="string">&quot;animate__animated&quot;</span>,</span><br><span class="line">  <span class="comment">// 触发 CSS 动画的类名称（动画库默认为&quot;animate.css&quot;库）</span></span><br><span class="line">  <span class="attr">offset</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="comment">// 定义浏览器视口底部与隐藏框顶部之间的距离。</span></span><br><span class="line">  <span class="comment">// 当用户滚动并到达此距离时，将显示隐藏的框。</span></span><br><span class="line">  <span class="attr">mobile</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="comment">// 在移动设备上打开/关闭wow.js。</span></span><br><span class="line">  <span class="attr">live</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">// 在页面上检查新的 wow.js元素。</span></span><br><span class="line">&#125;);</span><br><span class="line">wow.<span class="title function_">init</span>();</span><br></pre></td></tr></table></figure></li><li><p>引入 js 和 css 样式，修改<code>[Blogroot]\_config.butterfly.yml</code>的<code>inject</code>配置项，添加样式资源。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject</span>:</span><br><span class="line">  <span class="attr">head</span>:</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css&quot;</span> <span class="attr">media</span>=<span class="string">&quot;defer&quot;</span> <span class="attr">onload</span>=<span class="string">&quot;this.media=&#x27;all&#x27;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  bottom:</span></span><br><span class="line"><span class="language-xml">    - <span class="tag">&lt;<span class="name">script</span> <span class="attr">defer</span> <span class="attr">src</span>=<span class="string">&quot;https://fastly.jsdelivr.net/gh/graingert/wow@1.3.0/dist/wow.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    - <span class="tag">&lt;<span class="name">script</span> <span class="attr">defer</span> <span class="attr">data-pjax</span> <span class="attr">src</span>=<span class="string">&quot;/js/wow_init.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li><li><p>选择需要添加动画的 dom 元素，添加动画 class 类。此处提供三种写法。</p><ul><li><p>页面内写法，拟给<code>&lt;div class=&#39;example&#39;&gt;&lt;div&gt;</code>套上动画。一般在 page 页面或 post 页面中使用（也就是写博客的.md 文件）。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- raw的外挂标签是告诉渲染引擎这段代码不用渲染。 --&gt;</span></span><br><span class="line">&#123;% raw %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;example wow animate__bounceInUp&quot;</span>&gt;</span>Content to Reveal Here<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#123;% endraw %&#125;</span><br></pre></td></tr></table></figure></li><li><p>pug 写法，拟给首页文章卡片套上动画，直接源码修改：<br>修改<code>[Blogroot]\themes\butterfly\layout\includes\mixins\post-ui.pug</code></p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">    mixin postUI(posts)</span><br><span class="line">      each article , index in page.posts.data</span><br><span class="line"><span class="deletion">-       .recent-post-item</span></span><br><span class="line"><span class="addition">+       .recent-post-item.wow.animate__zoomIn</span></span><br><span class="line">          - let link = article.link || article.path</span><br><span class="line">          - let title = article.title || _p(&#x27;no_title&#x27;)</span><br></pre></td></tr></table></figure></li><li><p>js 批量添加写法（引入顺序需要在 wow_init.js 之前，而且需要 pjax 重载，每页重新添加一遍 class）。通过在页面按 F12,使用控制台右上角的元素选择器找到对应元素并获取 class 类名。</p><p>修改<code>[Blogroot]\themes\butterfly\source\js\wow_init.js</code>，在原有内容之前添加内容：</p><p>可根据自身网站需求，自定义动画。</p></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 给首页文章卡片套上动画</span></span><br><span class="line"><span class="keyword">var</span> arr = <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;recent-post-item&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">  arr[i].<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;wow&quot;</span>); <span class="comment">//必要项，添加wow.js标记</span></span><br><span class="line">  arr[i].<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;animate__zoomIn&quot;</span>); <span class="comment">//必要项，添加样式动画</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 给侧栏卡片套上动画</span></span><br><span class="line"><span class="keyword">var</span> arr = <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;card-widget&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">  arr[i].<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;wow&quot;</span>);</span><br><span class="line">  arr[i].<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;animate__slideInRight&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 给友链套上动画</span></span><br><span class="line"><span class="keyword">var</span> arr = <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;site-card&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">  arr[i].<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;wow&quot;</span>);</span><br><span class="line">  arr[i].<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;animate__flipInY&quot;</span>);</span><br><span class="line">  arr[i].<span class="title function_">setAttribute</span>(<span class="string">&quot;data-wow-duration&quot;</span>, <span class="string">&quot;3s&quot;</span>);</span><br><span class="line">  arr[i].<span class="title function_">setAttribute</span>(<span class="string">&quot;data-wow-delay&quot;</span>, <span class="string">&quot;100ms&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//初始化函数</span></span><br><span class="line">wow = <span class="keyword">new</span> <span class="title function_">WOW</span>(&#123;</span><br><span class="line">  <span class="attr">boxClass</span>: <span class="string">&quot;wow&quot;</span>,</span><br><span class="line">  <span class="comment">// 当用户滚动时显示隐藏框的类名称</span></span><br><span class="line">  <span class="attr">animateClass</span>: <span class="string">&quot;animate__animated&quot;</span>,</span><br><span class="line">  <span class="comment">// 触发 CSS 动画的类名称（动画库默认为&quot;animate.css&quot;库）</span></span><br><span class="line">  <span class="attr">offset</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="comment">// 定义浏览器视口底部与隐藏框顶部之间的距离。</span></span><br><span class="line">  <span class="comment">// 当用户滚动并到达此距离时，将显示隐藏的框。</span></span><br><span class="line">  <span class="attr">mobile</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">// 在移动设备上打开/关闭wow.js。</span></span><br><span class="line">  <span class="attr">live</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">// 在页面上检查新的 wow.js元素。</span></span><br><span class="line">&#125;);</span><br><span class="line">wow.<span class="title function_">init</span>();</span><br></pre></td></tr></table></figure></li><li><p>运行<code>hexo cl &amp;&amp; hexo g</code>之后即可看到效果。更多动画样式可以查看<a href="https://animate.style/">animate.css 参考文档</a></p></li></ol>              </div>            </details><h2 id="魔改源码方案"><a href="#魔改源码方案" class="headerlink" title="魔改源码方案"></a>魔改源码方案</h2><details class="folding-tag" yellow><summary> 点击查看魔改源码方案 </summary>              <div class='content'>              <div class="tip cogs"><p>魔改源码方案是基于<code>Butterfly_v3.4.1</code>编写的，低版本可能有些许不适用，可以考虑使用基础引入方案或者升级主题。或者自己理解后重构配置。</p></div><ol><li><p>新建<code>[Blogroot]\themes\butterfly\source\js\wow_init.js</code>,配置默认值。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">wow = <span class="keyword">new</span> <span class="title function_">WOW</span>(&#123;</span><br><span class="line">  <span class="attr">boxClass</span>: <span class="string">&quot;wow&quot;</span>,</span><br><span class="line">  <span class="comment">// 当用户滚动时显示隐藏框的类名称</span></span><br><span class="line">  <span class="attr">animateClass</span>: <span class="string">&quot;animate__animated&quot;</span>,</span><br><span class="line">  <span class="comment">// 触发 CSS 动画的类名称（动画库默认为&quot;animate.css&quot;库）</span></span><br><span class="line">  <span class="attr">offset</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="comment">// 定义浏览器视口底部与隐藏框顶部之间的距离。</span></span><br><span class="line">  <span class="comment">// 当用户滚动并到达此距离时，将显示隐藏的框。</span></span><br><span class="line">  <span class="attr">mobile</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="comment">// 在移动设备上打开/关闭wow.js。</span></span><br><span class="line">  <span class="comment">// 经测试此项配置无效。</span></span><br><span class="line">  <span class="attr">live</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">// 在页面上检查新的 wow.js元素。</span></span><br><span class="line">&#125;);</span><br><span class="line">wow.<span class="title function_">init</span>();</span><br></pre></td></tr></table></figure></li><li><p>新建<code>[Blogroot]\themes\butterfly\layout\includes\third-party\wowjs.pug</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">.pjax-reload</span><br><span class="line">  <span class="keyword">if</span> theme.wowjs.animateitem</span><br><span class="line">    each item <span class="keyword">in</span> theme.wowjs.animateitem</span><br><span class="line">      script(<span class="keyword">async</span>).</span><br><span class="line">        var arr = document.getElementsByClassName(<span class="string">&#x27;!&#123;item.class&#125;&#x27;</span>);</span><br><span class="line">        <span class="keyword">for</span>(var i = <span class="number">0</span>;i&lt;arr.length;i++)&#123;</span><br><span class="line">            arr[i].classList.add(<span class="string">&#x27;wow&#x27;</span>);</span><br><span class="line">            arr[i].classList.add(<span class="string">&#x27;!&#123;item.style&#125;&#x27;</span>);</span><br><span class="line">            arr[i].setAttribute(<span class="string">&#x27;data-wow-duration&#x27;</span>, <span class="string">&#x27;!&#123;item.duration&#125;&#x27;</span>);</span><br><span class="line">            arr[i].setAttribute(<span class="string">&#x27;data-wow-delay&#x27;</span>, <span class="string">&#x27;!&#123;item.delay&#125;&#x27;</span>);</span><br><span class="line">            arr[i].setAttribute(<span class="string">&#x27;data-wow-offset&#x27;</span>, <span class="string">&#x27;!&#123;item.offset&#125;&#x27;</span>);</span><br><span class="line">            arr[i].setAttribute(<span class="string">&#x27;data-wow-iteration&#x27;</span>, <span class="string">&#x27;!&#123;item.iteration&#125;&#x27;</span>);</span><br><span class="line">          &#125;</span><br><span class="line">script(defer src=url_for(theme.CDN.wowjs))</span><br><span class="line">script(defer src=url_for(theme.CDN.wowjs_init))</span><br></pre></td></tr></table></figure></li><li><p>修改<code>[Blogroot]\themes\butterfly\layout\includes\head.pug</code>的内容</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">    //- font</span><br><span class="line">    if theme.blog_title_font &amp;&amp;　theme.blog_title_font.font_link</span><br><span class="line">      link(rel=&#x27;stylesheet&#x27; href=url_for(theme.blog_title_font.font_link) media=&quot;print&quot; onload=&quot;this.media=&#x27;all&#x27;&quot;)</span><br><span class="line"><span class="addition">+   //- animate_css</span></span><br><span class="line"><span class="addition">+   if theme.wowjs.enable</span></span><br><span class="line"><span class="addition">+     link(rel=&#x27;stylesheet&#x27; href=url_for(theme.CDN.animate_css) media=&quot;print&quot; onload=&quot;this.media=&#x27;all&#x27;&quot;)</span></span><br><span class="line">    //- global config</span><br><span class="line">    !=partial(&#x27;includes/head/config&#x27;, &#123;&#125;, &#123;cache:theme.fragment_cache&#125;)</span><br></pre></td></tr></table></figure></li><li><p>.修改<code>[Blogroot]\themes\butterfly\layout\includes\additional-js.pug</code>的内容</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">    if theme.pjax.enable</span><br><span class="line">      !=partial(&#x27;includes/third-party/pjax&#x27;, &#123;&#125;, &#123;cache:theme.fragment_cache&#125;)</span><br><span class="line"></span><br><span class="line">    !=partial(&#x27;includes/third-party/baidu_push&#x27;, &#123;&#125;, &#123;cache:theme.fragment_cache&#125;)</span><br><span class="line"></span><br><span class="line"><span class="addition">+   if theme.wowjs.enable</span></span><br><span class="line"><span class="addition">+     !=partial(&#x27;includes/third-party/wowjs&#x27;, &#123;&#125;, &#123;cache:theme.fragment_cache&#125;)</span></span><br></pre></td></tr></table></figure><div class="note warning flat"><p>注意，此处要特别关注一下缩进问题。需要顶格加入。</p></li></ol></div><ol start="5"><li><p>修改<code>[Blogroot]\themes\butterfly\layout\includes\third-party\pjax.pug</code>的内容</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-   document.querySelectorAll(&#x27;script[data-pjax]&#x27;).forEach(item =&gt; &#123;</span></span><br><span class="line"><span class="addition">+   document.querySelectorAll(&#x27;script[data-pjax], .pjax-reload script&#x27;).forEach(item =&gt; &#123;</span></span><br><span class="line">      const newScript = document.createElement(&#x27;script&#x27;)</span><br><span class="line">      const content = item.text || item.textContent || item.innerHTML || &quot;&quot;</span><br><span class="line">      Array.from(item.attributes).forEach(attr =&gt; newScript.setAttribute(attr.name, attr.value))</span><br><span class="line">      newScript.appendChild(document.createTextNode(content))</span><br><span class="line">      item.parentNode.replaceChild(newScript, item)</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure></li><li><p>修改<code>[Blogroot]\_config.butterfly.yml</code>,添加 CDN 配置项</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">    CDN:</span><br><span class="line">      # main</span><br><span class="line">      main_css: /css/index.css</span><br><span class="line">      jquery: https://npm.elemecdn.com/jquery@latest/dist/jquery.min.js</span><br><span class="line">      main: /js/main.js</span><br><span class="line">      utils: /js/utils.js</span><br><span class="line"><span class="addition">+     wowjs: https://cdn.jsdelivr.net/gh/graingert/wow@1.3.0/dist/wow.min.js</span></span><br><span class="line"><span class="addition">+     wowjs_init: /js/wow_init.js # 之后可以自己换成CDN链接</span></span><br><span class="line"><span class="addition">+     animate_css: https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css</span></span><br></pre></td></tr></table></figure></li><li><p>修改<code>[Blogroot]\_config.butterfly.yml</code>,添加 wowjs 开关配置项,其中 class 和 style 是必填项，其余四个是选填项。此处提供首页文章卡片和侧栏卡片添加动画的示例。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">wowjs:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment">#控制动画开关。true是打开，false是关闭</span></span><br><span class="line">  <span class="attr">animateitem:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">recent-post-item</span> <span class="comment">#必填项，需要添加动画的元素的class</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__zoomIn</span> <span class="comment">#必填项，需要添加的动画</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="string">2s</span> <span class="comment">#选填项，动画持续时间，单位可以是ms也可以是s。例如3s，700ms。</span></span><br><span class="line">      <span class="attr">delay:</span> <span class="string">1s</span> <span class="comment">#选填项，动画开始的延迟时间，单位可以是ms也可以是s。例如3s，700ms。</span></span><br><span class="line">      <span class="attr">offset:</span> <span class="number">100</span> <span class="comment">#选填项，开始动画的距离（相对浏览器底部）</span></span><br><span class="line">      <span class="attr">iteration:</span> <span class="number">2</span> <span class="comment">#选填项，动画重复的次数</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">card-widget</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__zoomIn</span></span><br></pre></td></tr></table></figure></li><li><p>运行<code>hexo cl &amp;&amp; hexo g</code>之后即可看到效果。更多动画样式可以查看<a href="https://animate.style/">animate.css 参考文档</a>。</p></li></ol>              </div>            </details><h2 id="外挂标签写法配置方案"><a href="#外挂标签写法配置方案" class="headerlink" title="外挂标签写法配置方案"></a>外挂标签写法配置方案</h2><details class="folding-tag" blue><summary> 点击查看外挂标签写法配置教程 </summary>              <div class='content'>              <ol><li><p>.外挂标签写法生效的前提是完成了上面的基础引入方案或者插件引入方案（二选一即可）。</p></li><li><p>新建<code>[Blogroot]\themes\butterfly\scripts\tag\wowanimate.js</code>:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#x27;use strict&#x27;</span><br><span class="line"></span><br><span class="line">function wow (args, content) &#123;</span><br><span class="line">  args = args.join(&#x27; &#x27;).split(&#x27;,&#x27;)</span><br><span class="line">  let p0 = args[0]?args[0].trim():&#x27;&#x27;</span><br><span class="line">  let p1 = args[1]?args[1].trim():&#x27;&#x27;</span><br><span class="line">  let p2 = args[2]?args[2].trim():&#x27;&#x27;</span><br><span class="line">  let p3 = args[3]?args[3].trim():&#x27;&#x27;</span><br><span class="line">  let p4 = args[4]?args[4].trim():&#x27;&#x27;</span><br><span class="line">  return `&lt;div class=&#x27;wow $&#123;p0&#125;&#x27; data-wow-duration=&#x27;$&#123;p1&#125;&#x27; data-wow-delay=&#x27;$&#123;p2&#125;&#x27; data-wow-offset=&#x27;$&#123;p3&#125;&#x27;  data-wow-iteration=&#x27;$&#123;p4&#125;&#x27; &gt;$&#123;hexo.render.renderSync(&#123; text: content, engine: &#x27;markdown&#x27; &#125;)&#125;&lt;/div&gt;`</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">hexo.extend.tag.register(&#x27;wow&#x27;,wow,&#123; ends: true &#125;);</span><br></pre></td></tr></table></figure></li><li><p>使用方法与上述的使用方法相同。</p></li></ol>              </div>            </details><h2 id="BUG-反馈归纳"><a href="#BUG-反馈归纳" class="headerlink" title="BUG 反馈归纳"></a>BUG 反馈归纳</h2><ol><li><p>如果使用了 gulp-babel，在压缩 js 时可能报错：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wow_init.js:1 Uncaught ReferenceError: wow is not defined</span><br></pre></td></tr></table></figure><p>修改<code>[Blogroot]\gulpfile.js</code>,添加一行屏蔽项，不要压缩<code>wow_init.js</code></p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">    //minify js babel</span><br><span class="line">    gulp.task(&#x27;compress&#x27;, () =&gt;</span><br><span class="line"><span class="deletion">-     gulp.src([&#x27;./public/**/*.js&#x27;, &#x27;!./public/**/*.min.js&#x27;])</span></span><br><span class="line"><span class="addition">+     gulp.src([&#x27;./public/**/*.js&#x27;, &#x27;!./public/**/*.min.js&#x27;,&#x27;!./public/js/wow_init.js&#x27;])</span></span><br><span class="line">       .pipe(babel(&#123;</span><br><span class="line">         presets: [&#x27;@babel/preset-env&#x27;]</span><br></pre></td></tr></table></figure></li><li><p>在 wowjs 初始化设置中设置了 mobile 为 false，但是手机依然生效。<br>推测是因为 wowjs 原本是基于 animate.css_v3.0 编写的，但是本帖沿用的是 4.0。<del>好吧，经测试，3.0 也不生效</del><br>解决方案是自主添加媒体选择。在 css 异步加载的适配中将<code>onload=&quot;this.media=&#39;all&#39;&quot;</code> 改为<code>onload=&quot;this.media=&#39;screen&#39;&quot;</code>,这样，样式就只会对电脑设备（或等宽度的设备）生效了。</p></li></ol><div class="tip bell"><p>出处：此文转载于友链大佬 <a href="https://akilar.top/">Akilar</a> 有喜欢的同学可以去逛逛。</p></div>]]></content>
    
    
    <summary type="html">使用Wow.js给页面添加动画</summary>
    
    
    
    <category term="Butterfly主题" scheme="https://axiandaytoy.cn/categories/Butterfly%E4%B8%BB%E9%A2%98/"/>
    
    
    <category term="Butterfly主题" scheme="https://axiandaytoy.cn/tags/Butterfly%E4%B8%BB%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>Butterfly主题友链魔改</title>
    <link href="https://axiandaytoy.cn/posts/1eb9527c/"/>
    <id>https://axiandaytoy.cn/posts/1eb9527c/</id>
    <published>2022-06-03T05:30:39.000Z</published>
    <updated>2022-07-09T08:27:03.756Z</updated>
    
    <content type="html"><![CDATA[<h2 id="最终效果"><a href="#最终效果" class="headerlink" title="最终效果"></a>最终效果</h2><details class="folding-tag" ><summary> 预览效果 </summary>              <div class='content'>              <p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/image-20220603101155938.png"></p>              </div>            </details><h2 id="魔改步骤"><a href="#魔改步骤" class="headerlink" title="魔改步骤"></a>魔改步骤</h2><ol><li><p>在 Hexo 博客根目录<code>[Blogroot]</code>下打开终端，输入<code>hexo new page link</code>。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page <span class="built_in">link</span></span><br></pre></td></tr></table></figure></li><li><p>打开<code>[Blogroot]\source\link\index.md</code>,添加一行<code>type: &#39;link&#39;</code>:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 友情链接</span><br><span class="line">date: 2022-05-16 11:16:42</span><br><span class="line">type: &quot;link&quot;</span><br><span class="line">author: 阿羡</span><br><span class="line">---</span><br></pre></td></tr></table></figure></li><li><p>新建文件<code>[Blogroot]\source\_data\link.yml</code>,没有<code>_data</code>文件夹的话也请自己新建。以下是默认友链格式示例。打开<code>[Blogroot]\source\_data\link.yml</code>，输入：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">class_name:</span> <span class="string">分组名称</span></span><br><span class="line">  <span class="attr">class_desc:</span> <span class="string">分组备注</span></span><br><span class="line">  <span class="attr">link_list:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">阿羡吖</span></span><br><span class="line">      <span class="attr">link:</span> <span class="string">https://axiandaytoy.cn/</span></span><br><span class="line">      <span class="attr">avatar:</span> <span class="string">https://axiandaytoy.cn/images/favicon.png</span></span><br><span class="line">      <span class="attr">descr:</span> <span class="string">发自己的光就好，不要吹灭别人的灯。</span></span><br></pre></td></tr></table></figure></li><li><p>取消<code>[Blogroot]\_config.butterfly.yml</code>中<code>menu</code>配置项内<code>link</code>页面的注释。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="string">首页:</span> <span class="string">/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-home</span></span><br><span class="line">  <span class="string">宝藏音乐:</span> <span class="string">/music/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-music</span></span><br><span class="line">  <span class="string">图库:</span> <span class="string">/gallery/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-images</span></span><br><span class="line">  <span class="string">友链:</span> <span class="string">/link/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-link</span></span><br><span class="line">  <span class="comment"># Archives: /archives/ || fas fa-archive</span></span><br><span class="line">  <span class="comment"># Tags: /tags/ || fas fa-tags</span></span><br><span class="line">  <span class="comment"># Categories: /categories/ || fas fa-folder-open</span></span><br><span class="line">  <span class="comment"># List||fas fa-list:</span></span><br><span class="line">  <span class="comment">#   Movie: /movies/ || fas fa-video</span></span><br><span class="line">  <span class="comment"># About: /about/ || fas fa-heart</span></span><br></pre></td></tr></table></figure></li><li><p>修改<code>[Blogroot]\themes\butterfly\layout\includes\page\flink.pug</code>,此处添加判断机制，使得可以通过修改配置文件来切换友链风格。同时为了方便管理，把各个友链样式放到新建的文件目录<code>[Blogroot]\themes\butterfly\layout\includes\page\flink_style</code>下。</p><div class="tabs" id="test4"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test4-1">flink.pug</button></li><li class="tab"><button type="button" data-href="#test4-2">butterfly.pug</button></li><li class="tab"><button type="button" data-href="#test4-3">volantis.pug</button></li><li class="tab"><button type="button" data-href="#test4-4">flexcard.pug</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test4-1"><p>修改<code>[Blogroot]\themes\butterfly\layout\includes\page\flink.pug</code>，全部内容替换为：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">case theme.flink_style</span><br><span class="line">  when &#x27;volantis&#x27;</span><br><span class="line">    include ./flink_style/volantis.pug</span><br><span class="line">  when &#x27;flexcard&#x27;</span><br><span class="line">    include ./flink_style/flexcard.pug</span><br><span class="line">  default</span><br><span class="line">    include ./flink_style/butterfly.pug</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test4-2"><p>新建<code>[Blogroot]\themes\butterfly\layout\includes\page\flink_style\butterfly.pug</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">#article-container</span><br><span class="line">  if top_img === false</span><br><span class="line">    h1.page-title= page.title</span><br><span class="line">  .flink</span><br><span class="line">    if site.data.link</span><br><span class="line">      each i in site.data.link</span><br><span class="line">        if i.class_name</span><br><span class="line">          h2!= i.class_name</span><br><span class="line">        if i.class_desc</span><br><span class="line">          .flink-desc!=i.class_desc</span><br><span class="line">        .flink-list</span><br><span class="line">          each item in i.link_list</span><br><span class="line">            .flink-list-item</span><br><span class="line">              a(href=url_for(item.link)  title=item.name target=&quot;_blank&quot;)</span><br><span class="line">                .flink-item-icon</span><br><span class="line">                  img.no-lightbox(src=url_for(item.avatar) onerror=`this.onerror=null;this.src=&#x27;` + url_for(theme.error_img.flink) + `&#x27;` alt=item.name )</span><br><span class="line">                .flink-item-name= item.name</span><br><span class="line">                .flink-item-desc(title=item.descr)= item.descr</span><br><span class="line">  != page.content</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test4-3"><p>新建<code>[Blogroot]\themes\butterfly\layout\includes\page\flink_style\volantis.pug</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">#article-container</span><br><span class="line">  if top_img === false</span><br><span class="line">    h1.page-title= page.title</span><br><span class="line">  .flink</span><br><span class="line">    if site.data.link</span><br><span class="line">      each i in site.data.link</span><br><span class="line">        if i.class_name</span><br><span class="line">          h2!= i.class_name</span><br><span class="line">        if i.class_desc</span><br><span class="line">          .flink-desc!=i.class_desc</span><br><span class="line">        .site-card-group</span><br><span class="line">          each item in i.link_list</span><br><span class="line">            a.site-card(target=&#x27;_blank&#x27; rel=&#x27;noopener&#x27; href=url_for(item.link))</span><br><span class="line">              .img</span><br><span class="line">                - var siteshot = item.siteshot ? url_for(item.siteshot) : &#x27;https://image.thum.io/get/width/400/crop/800/allowJPG/wait/20/noanimate/&#x27; + item.link</span><br><span class="line">                img.no-lightbox(src=siteshot onerror=`this.onerror=null;this.src=&#x27;` + url_for(theme.error_img.post_page) + `&#x27;` alt=&#x27;&#x27; )</span><br><span class="line">              .info</span><br><span class="line">                img.no-lightbox(src=url_for(item.avatar) onerror=`this.onerror=null;this.src=&#x27;` + url_for(theme.error_img.flink) + `&#x27;` alt=&#x27;&#x27; )</span><br><span class="line">                span.title= item.name</span><br><span class="line">                span.desc(title=item.descr)= item.descr</span><br><span class="line">  != page.content</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test4-4"><p>新建<code>[Blogroot]\themes\butterfly\layout\includes\page\flink_style\flexcard.pug</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">#article-container</span><br><span class="line">  if top_img === false</span><br><span class="line">    h1.page-title= page.title</span><br><span class="line">  .flink</span><br><span class="line">    if site.data.link</span><br><span class="line">      each i in site.data.link</span><br><span class="line">        if i.class_name</span><br><span class="line">          h2!= i.class_name</span><br><span class="line">        if i.class_desc</span><br><span class="line">          .flink-desc!=i.class_desc</span><br><span class="line">        .flink-list</span><br><span class="line">          each item in i.link_list</span><br><span class="line">            a.flink-list-card(href=url_for(item.link) target=&#x27;_blank&#x27; data-title=item.descr)</span><br><span class="line">              .wrapper.cover</span><br><span class="line">                - var siteshot = item.siteshot ? url_for(item.siteshot) : &#x27;https://image.thum.io/get/width/400/crop/800/allowJPG/wait/20/noanimate/&#x27; + item.link</span><br><span class="line">                img.no-lightbox.cover.fadeIn(src=siteshot onerror=`this.onerror=null;this.src=&#x27;` + url_for(theme.error_img.post_page) + `&#x27;` alt=&#x27;&#x27; )</span><br><span class="line">              .info</span><br><span class="line">                img.no-lightbox(src=url_for(item.avatar) onerror=`this.onerror=null;this.src=&#x27;` + url_for(theme.error_img.flink) + `&#x27;` alt=&#x27;&#x27; )</span><br><span class="line">                span.flink-sitename= item.name</span><br><span class="line">  != page.content</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></li><li><p>修改<code>[Blogroot]\themes\butterfly\source\css\_page\flink.styl</code>,同理，将样式文件也放到新建的<code>[Blogroot]\themes\butterfly\source\css\_flink_style</code>目录下方便管理。</p><div class="tabs" id="test4"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test4-1">flink.styl</button></li><li class="tab"><button type="button" data-href="#test4-2">butterfly.styl</button></li><li class="tab"><button type="button" data-href="#test4-3">volantis.styl</button></li><li class="tab"><button type="button" data-href="#test4-4">flexcard.styl</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test4-1"><p>修改<code>[Blogroot]\themes\butterfly\source\css_page\flink.styl</code></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="built_in">hexo-config</span>(<span class="string">&#x27;flink_style&#x27;</span>) == <span class="string">&#x27;butterfly&#x27;</span></span><br><span class="line">  <span class="keyword">@import</span> <span class="string">&#x27;./_flink_style/butterfly&#x27;</span></span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> <span class="built_in">hexo-config</span>(<span class="string">&#x27;flink_style&#x27;</span>) == <span class="string">&#x27;volantis&#x27;</span></span><br><span class="line">  <span class="keyword">@import</span> <span class="string">&#x27;./_flink_style/volantis&#x27;</span></span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> <span class="built_in">hexo-config</span>(<span class="string">&#x27;flink_style&#x27;</span>) == <span class="string">&#x27;flexcard&#x27;</span></span><br><span class="line">  <span class="keyword">@import</span> <span class="string">&#x27;./_flink_style/flexcard&#x27;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test4-2"><p>新建<code>[Blogroot]\themes\butterfly\source\css_flink_style\butterfly.styl</code></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">.flink<span class="selector-id">#article-container</span></span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">20px</span></span><br><span class="line"><span class="selector-class">.flink-desc</span></span><br><span class="line">  <span class="attribute">margin</span>: .<span class="number">2rem</span> <span class="number">0</span> .<span class="number">5rem</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.flink-list</span></span><br><span class="line">  <span class="attribute">overflow</span>: auto</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">10px</span> <span class="number">0</span></span><br><span class="line">  <span class="attribute">text-align</span>: center</span><br><span class="line"></span><br><span class="line">  &amp; &gt; <span class="selector-class">.flink-list-item</span></span><br><span class="line">    <span class="attribute">position</span>: relative</span><br><span class="line">    <span class="attribute">float</span>: left</span><br><span class="line">    <span class="attribute">overflow</span>: hidden</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">15px</span> <span class="number">7px</span></span><br><span class="line">    <span class="attribute">width</span>: calc(<span class="number">100%</span> / <span class="number">3</span> - <span class="number">15px</span>)</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">90px</span></span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span></span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">17px</span></span><br><span class="line">    -webkit-<span class="attribute">transform</span>: translateZ(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    +<span class="built_in">maxWidth1024</span>()</span><br><span class="line">      <span class="attribute">width</span>: calc(<span class="number">50%</span> - <span class="number">15px</span>) <span class="meta">!important</span></span><br><span class="line"></span><br><span class="line">    +<span class="built_in">maxWidth600</span>()</span><br><span class="line">      <span class="attribute">width</span>: calc(<span class="number">100%</span> - <span class="number">15px</span>) <span class="meta">!important</span></span><br><span class="line"></span><br><span class="line">    <span class="selector-pseudo">&amp;:hover</span></span><br><span class="line">      <span class="selector-class">.flink-item-icon</span></span><br><span class="line">        <span class="attribute">margin-left</span>: -<span class="number">10px</span></span><br><span class="line">        <span class="attribute">width</span>: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="selector-pseudo">&amp;:before</span></span><br><span class="line">      <span class="attribute">position</span>: absolute</span><br><span class="line">      <span class="attribute">top</span>: <span class="number">0</span></span><br><span class="line">      <span class="attribute">right</span>: <span class="number">0</span></span><br><span class="line">      <span class="attribute">bottom</span>: <span class="number">0</span></span><br><span class="line">      <span class="attribute">left</span>: <span class="number">0</span></span><br><span class="line">      <span class="attribute">z-index</span>: -<span class="number">1</span></span><br><span class="line">      <span class="attribute">background</span>: var(--text-bg-hover)</span><br><span class="line">      <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">      <span class="attribute">transition</span>: transform .<span class="number">3s</span> ease-out</span><br><span class="line">      <span class="attribute">transform</span>: scale(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    <span class="selector-pseudo">&amp;:hover</span><span class="selector-pseudo">:before</span>,</span><br><span class="line">    <span class="selector-pseudo">&amp;:focus</span><span class="selector-pseudo">:before</span>,</span><br><span class="line">    <span class="selector-pseudo">&amp;:active</span><span class="selector-pseudo">:before</span></span><br><span class="line">      <span class="attribute">transform</span>: scale(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="selector-tag">a</span></span><br><span class="line">      <span class="attribute">color</span>: var(--font-color)</span><br><span class="line">      <span class="attribute">text-decoration</span>: none</span><br><span class="line"></span><br><span class="line">      <span class="selector-class">.flink-item-icon</span></span><br><span class="line">        <span class="attribute">float</span>: left</span><br><span class="line">        <span class="attribute">overflow</span>: hidden</span><br><span class="line">        <span class="attribute">margin</span>: <span class="number">15px</span> <span class="number">10px</span></span><br><span class="line">        <span class="attribute">width</span>: <span class="number">60px</span></span><br><span class="line">        <span class="attribute">height</span>: <span class="number">60px</span></span><br><span class="line">        <span class="attribute">border-radius</span>: <span class="number">35px</span></span><br><span class="line">        <span class="attribute">transition</span>: width .<span class="number">3s</span> ease-out</span><br><span class="line"></span><br><span class="line">        <span class="selector-tag">img</span></span><br><span class="line">          <span class="attribute">width</span>: <span class="number">100%</span></span><br><span class="line">          <span class="attribute">height</span>: <span class="number">100%</span></span><br><span class="line">          <span class="attribute">transition</span>: filter <span class="number">375ms</span> ease-in .<span class="number">2s</span>, transform .<span class="number">3s</span></span><br><span class="line">          <span class="attribute">object-fit</span>: cover</span><br><span class="line"></span><br><span class="line">      <span class="selector-class">.img-alt</span></span><br><span class="line">        <span class="attribute">display</span>: none</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.flink-item-name</span></span><br><span class="line">  <span class="keyword">@extend</span> <span class="selector-class">.limit-one-line</span></span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">16px</span> <span class="number">10px</span> <span class="number">0</span> <span class="number">0</span></span><br><span class="line">  <span class="attribute">height</span>: <span class="number">40px</span></span><br><span class="line">  <span class="attribute">font-weight</span>: bold</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">1.43em</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.flink-item-desc</span></span><br><span class="line">  <span class="keyword">@extend</span> <span class="selector-class">.limit-one-line</span></span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">16px</span> <span class="number">10px</span> <span class="number">16px</span> <span class="number">0</span></span><br><span class="line">  <span class="attribute">height</span>: <span class="number">50px</span></span><br><span class="line">  <span class="attribute">font-size</span>: .<span class="number">93em</span></span><br><span class="line"><span class="selector-class">.flink-name</span></span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">5px</span></span><br><span class="line">  <span class="attribute">font-weight</span>: bold</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">1.5em</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test4-3"><p>新建<code>[Blogroot]\themes\butterfly\source\css_flink_style\volantis.styl</code></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">trans</span><span class="params">(<span class="variable">$time</span> = <span class="number">0.28s</span>)</span></span></span><br><span class="line">  <span class="attribute">transition</span>: all <span class="variable">$time</span> ease</span><br><span class="line">  -moz-<span class="attribute">transition</span>: all <span class="variable">$time</span> ease</span><br><span class="line">  -webkit-<span class="attribute">transition</span>: all <span class="variable">$time</span> ease</span><br><span class="line">  -o-<span class="attribute">transition</span>: all <span class="variable">$time</span> ease</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.site-card-group</span></span><br><span class="line">  <span class="attribute">display</span>: flex</span><br><span class="line">  <span class="attribute">flex-wrap</span>: wrap</span><br><span class="line">  <span class="attribute">justify-content</span>: flex-start</span><br><span class="line">  <span class="attribute">margin</span>: -<span class="number">0.5</span> * <span class="number">16px</span></span><br><span class="line">  <span class="attribute">align-items</span>: stretch</span><br><span class="line"><span class="selector-class">.site-card</span></span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">16px</span> * <span class="number">0.5</span></span><br><span class="line">  <span class="attribute">width</span>: <span class="string">&quot;calc(100% / 4 - %s)&quot;</span> % <span class="number">16px</span></span><br><span class="line">  <span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>: <span class="number">2048px</span>)</span><br><span class="line">      <span class="attribute">width</span>: &quot;calc(<span class="number">100%</span> / <span class="number">5</span> - %s)&quot; % <span class="number">16px</span></span><br><span class="line">  @media screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">768px</span>)</span><br><span class="line">      <span class="attribute">width</span>: &quot;calc(<span class="number">100%</span> / <span class="number">3</span> - %s)&quot; % <span class="number">16px</span></span><br><span class="line">  @media screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">500px</span>)</span><br><span class="line">      <span class="attribute">width</span>: &quot;calc(<span class="number">100%</span> / <span class="number">2</span> - %s)&quot; % <span class="number">16px</span></span><br><span class="line">  display: block</span><br><span class="line">  line-height: <span class="number">1.4</span></span><br><span class="line">  <span class="attribute">height</span> <span class="number">100%</span></span><br><span class="line">  .img</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span></span><br><span class="line">    <span class="attribute">height</span> <span class="number">120px</span></span><br><span class="line">    @media screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">500px</span>)</span><br><span class="line">      <span class="attribute">height</span> <span class="number">100px</span></span><br><span class="line">    overflow: hidden</span><br><span class="line">    border-radius: <span class="number">12px</span> * <span class="number">0.5</span></span><br><span class="line">    box-shadow: <span class="number">0</span> <span class="number">1px</span> <span class="number">2px</span> <span class="number">0px</span> rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.2</span>)</span><br><span class="line">    background: #f6f6f6</span><br><span class="line">    img</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">100%</span></span><br><span class="line">      <span class="attribute">height</span> <span class="number">100%</span></span><br><span class="line">      pointer-events:none;</span><br><span class="line">      <span class="comment">// trans(.75s)</span></span><br><span class="line">      <span class="attribute">transition</span>: transform <span class="number">2s</span> ease</span><br><span class="line">      <span class="attribute">object-fit</span>: cover</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.info</span></span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">16px</span> * <span class="number">0.5</span></span><br><span class="line">    <span class="selector-tag">img</span></span><br><span class="line">      <span class="attribute">width</span>: <span class="number">32px</span></span><br><span class="line">      <span class="attribute">height</span>: <span class="number">32px</span></span><br><span class="line">      <span class="attribute">pointer-events</span>:none;</span><br><span class="line">      <span class="attribute">border-radius</span>: <span class="number">16px</span></span><br><span class="line">      <span class="attribute">float</span>: left</span><br><span class="line">      <span class="attribute">margin-right</span>: <span class="number">8px</span></span><br><span class="line">      <span class="attribute">margin-top</span>: <span class="number">2px</span></span><br><span class="line">    <span class="selector-tag">span</span></span><br><span class="line">      <span class="attribute">display</span>: block</span><br><span class="line">    <span class="selector-class">.title</span></span><br><span class="line">      <span class="attribute">font-weight</span>: <span class="number">600</span></span><br><span class="line">      <span class="attribute">font-size</span>: var(--global-font-size)</span><br><span class="line">      <span class="attribute">color</span>: <span class="number">#444</span></span><br><span class="line">      <span class="attribute">display</span>: -webkit-box</span><br><span class="line">      -webkit-box-orient: vertical</span><br><span class="line">      <span class="attribute">overflow</span>: hidden</span><br><span class="line">      -webkit-line-clamp: <span class="number">1</span></span><br><span class="line">      <span class="built_in">trans</span>()</span><br><span class="line">    <span class="selector-class">.desc</span></span><br><span class="line">      <span class="attribute">font-size</span>: var(--global-font-size)</span><br><span class="line">      <span class="attribute">word-wrap</span>: break-word;</span><br><span class="line">      <span class="attribute">line-height</span>: <span class="number">1.2</span></span><br><span class="line">      <span class="attribute">color</span>: <span class="number">#888</span></span><br><span class="line">      <span class="attribute">display</span>: -webkit-box</span><br><span class="line">      -webkit-box-orient: vertical</span><br><span class="line">      <span class="attribute">overflow</span>: hidden</span><br><span class="line">      -webkit-line-clamp: <span class="number">2</span></span><br><span class="line">  <span class="selector-class">.img</span></span><br><span class="line">    <span class="built_in">trans</span>()</span><br><span class="line">  <span class="selector-pseudo">&amp;:hover</span></span><br><span class="line">    <span class="selector-class">.img</span></span><br><span class="line">      <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">4px</span> <span class="number">8px</span> <span class="number">0px</span> rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>), <span class="number">0</span> <span class="number">2px</span> <span class="number">4px</span> <span class="number">0px</span> rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>), <span class="number">0</span> <span class="number">4px</span> <span class="number">8px</span> <span class="number">0px</span> rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>), <span class="number">0</span> <span class="number">8px</span> <span class="number">16px</span> <span class="number">0px</span> rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>)</span><br><span class="line">    <span class="selector-class">.info</span> <span class="selector-class">.title</span></span><br><span class="line">      <span class="attribute">color</span>: <span class="number">#ff5722</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test4-4"><p>新建<code>[Blogroot]\themes\butterfly\source\css\_flink_style\flexcard.styl</code></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#article-container</span> <span class="selector-tag">img</span></span><br><span class="line">  <span class="attribute">margin</span> <span class="number">0</span> auto<span class="meta">!important</span></span><br><span class="line"><span class="selector-class">.flink-list</span></span><br><span class="line">  <span class="attribute">overflow</span> auto</span><br><span class="line">  &amp; &gt; <span class="selector-tag">a</span></span><br><span class="line">    <span class="attribute">width</span> calc(<span class="number">25%</span> - <span class="number">15px</span>)</span><br><span class="line">    <span class="attribute">height</span> <span class="number">130px</span></span><br><span class="line">    <span class="attribute">position</span> relative</span><br><span class="line">    <span class="attribute">display</span> block</span><br><span class="line">    <span class="attribute">margin</span> <span class="number">15px</span> <span class="number">7px</span></span><br><span class="line">    <span class="attribute">float</span> left</span><br><span class="line">    <span class="attribute">overflow</span> hidden</span><br><span class="line">    <span class="attribute">border-radius</span> <span class="number">10px</span></span><br><span class="line">    <span class="attribute">transition</span> all .<span class="number">3s</span> ease <span class="number">0s</span>, transform .<span class="number">6s</span> cubic-bezier(.<span class="number">6</span>, .<span class="number">2</span>, .<span class="number">1</span>, <span class="number">1</span>) <span class="number">0s</span></span><br><span class="line">    <span class="attribute">box-shadow</span> <span class="number">0</span> <span class="number">14px</span> <span class="number">38px</span> rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, .<span class="number">08</span>), <span class="number">0</span> <span class="number">3px</span> <span class="number">8px</span> rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, .<span class="number">06</span>)</span><br><span class="line">    <span class="selector-pseudo">&amp;:hover</span></span><br><span class="line">      <span class="selector-class">.info</span></span><br><span class="line">        <span class="attribute">transform</span> translateY(-<span class="number">100%</span>)</span><br><span class="line">      <span class="selector-class">.wrapper</span></span><br><span class="line">        <span class="selector-tag">img</span></span><br><span class="line">          <span class="attribute">transform</span> scale(<span class="number">1.2</span>)</span><br><span class="line">      <span class="selector-pseudo">&amp;::before</span></span><br><span class="line">        <span class="attribute">position</span>: fixed</span><br><span class="line">        <span class="attribute">width</span>:inherit</span><br><span class="line">        <span class="attribute">margin</span>:auto</span><br><span class="line">        <span class="attribute">left</span>:<span class="number">0</span></span><br><span class="line">        <span class="attribute">right</span>:<span class="number">0</span></span><br><span class="line">        <span class="attribute">top</span>:<span class="number">10%</span></span><br><span class="line">        <span class="attribute">border-radius</span>: <span class="number">10px</span></span><br><span class="line">        <span class="attribute">text-align</span>: center</span><br><span class="line">        <span class="attribute">z-index</span>: <span class="number">100</span></span><br><span class="line">        <span class="attribute">content</span>: attr(data-title)</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">20px</span></span><br><span class="line">        <span class="attribute">color</span>: <span class="number">#fff</span></span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">10px</span></span><br><span class="line">        <span class="attribute">background-color</span>: rgba(<span class="variable">$theme</span>-color,<span class="number">0.8</span>)</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.cover</span></span><br><span class="line">      <span class="attribute">width</span> <span class="number">100%</span></span><br><span class="line">      <span class="attribute">transition</span> transform .<span class="number">5s</span> ease-out</span><br><span class="line">    <span class="selector-class">.wrapper</span></span><br><span class="line">      <span class="attribute">position</span> relative</span><br><span class="line">      <span class="selector-class">.fadeIn</span></span><br><span class="line">        <span class="attribute">animation</span> coverIn .<span class="number">8s</span> ease-out forwards</span><br><span class="line">      <span class="selector-tag">img</span></span><br><span class="line">        <span class="attribute">height</span> <span class="number">130px</span></span><br><span class="line">        <span class="attribute">pointer-events</span> none</span><br><span class="line">    <span class="selector-class">.info</span></span><br><span class="line">      <span class="attribute">display</span> flex</span><br><span class="line">      <span class="attribute">flex-direction</span> column</span><br><span class="line">      <span class="attribute">justify-content</span> center</span><br><span class="line">      <span class="attribute">align-items</span> center</span><br><span class="line">      <span class="attribute">width</span> <span class="number">100%</span></span><br><span class="line">      <span class="attribute">height</span> <span class="number">100%</span></span><br><span class="line">      <span class="attribute">overflow</span> hidden</span><br><span class="line">      <span class="attribute">border-radius</span> <span class="number">3px</span></span><br><span class="line">      <span class="attribute">background-color</span> hsla(<span class="number">0</span>, <span class="number">0%</span>, <span class="number">100%</span>, .<span class="number">7</span>)</span><br><span class="line">      <span class="attribute">transition</span> transform .<span class="number">5s</span> cubic-bezier(.<span class="number">6</span>, .<span class="number">2</span>, .<span class="number">1</span>, <span class="number">1</span>) <span class="number">0s</span></span><br><span class="line">      <span class="selector-tag">img</span></span><br><span class="line">        <span class="attribute">position</span> relative</span><br><span class="line">        <span class="attribute">top</span> <span class="number">22px</span></span><br><span class="line">        <span class="attribute">width</span> <span class="number">66px</span></span><br><span class="line">        <span class="attribute">height</span> <span class="number">66px</span></span><br><span class="line">        <span class="attribute">border-radius</span> <span class="number">50%</span></span><br><span class="line">        <span class="attribute">box-shadow</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, .<span class="number">3</span>)</span><br><span class="line">        <span class="attribute">z-index</span> <span class="number">1</span></span><br><span class="line">        <span class="attribute">text-align</span> center</span><br><span class="line">        <span class="attribute">pointer-events</span> none</span><br><span class="line">      <span class="selector-tag">span</span></span><br><span class="line">        <span class="attribute">padding</span> <span class="number">20px</span> <span class="number">10%</span> <span class="number">60px</span> <span class="number">10%</span></span><br><span class="line">        <span class="attribute">font-size</span> <span class="number">16px</span></span><br><span class="line">        <span class="attribute">width</span> <span class="number">100%</span></span><br><span class="line">        <span class="attribute">text-align</span> center</span><br><span class="line">        <span class="attribute">box-shadow</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, .<span class="number">3</span>)</span><br><span class="line">        <span class="attribute">background-color</span> hsla(<span class="number">0</span>, <span class="number">0%</span>, <span class="number">100%</span>, .<span class="number">7</span>)</span><br><span class="line">        <span class="attribute">color</span> var(--font-color)</span><br><span class="line">        <span class="attribute">white-space</span> nowrap</span><br><span class="line">        <span class="attribute">overflow</span> hidden</span><br><span class="line">        <span class="attribute">text-overflow</span> ellipsis</span><br><span class="line">.flink-list&gt;<span class="selector-tag">a</span> <span class="selector-class">.info</span>,</span><br><span class="line">.flink-list&gt;<span class="selector-tag">a</span> <span class="selector-class">.wrapper</span> <span class="selector-class">.cover</span></span><br><span class="line">  <span class="attribute">position</span> absolute</span><br><span class="line">  <span class="attribute">top</span> <span class="number">0</span></span><br><span class="line">  <span class="attribute">left</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>:<span class="number">1024px</span>)</span><br><span class="line">  .flink-list</span><br><span class="line">    &amp; &gt; a</span><br><span class="line">      <span class="attribute">width</span> calc(<span class="number">33.33333%</span> - <span class="number">15px</span>)</span><br><span class="line"></span><br><span class="line">@media screen <span class="keyword">and</span> (<span class="attribute">max-width</span>:<span class="number">600px</span>)</span><br><span class="line">  .flink-list</span><br><span class="line">    &amp; &gt; a</span><br><span class="line">      <span class="attribute">width</span> calc(<span class="number">50%</span> - <span class="number">15px</span>)</span><br><span class="line"></span><br><span class="line">[data-theme=dark]</span><br><span class="line">  .flink-list a .info,</span><br><span class="line">  .flink-list a .info span</span><br><span class="line">    background-color rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, .<span class="number">6</span>)</span><br><span class="line">  .flink-list</span><br><span class="line">    &amp; &gt; a</span><br><span class="line">      &amp;:<span class="attribute">hover</span></span><br><span class="line">        &amp;:before</span><br><span class="line">          background-color: rgba(#<span class="number">121212</span>,<span class="number">0.8</span>);</span><br><span class="line"><span class="selector-class">.justified-gallery</span> &gt; <span class="selector-tag">div</span> &gt; <span class="selector-tag">img</span>,</span><br><span class="line"><span class="selector-class">.justified-gallery</span> &gt; <span class="selector-tag">figure</span> &gt; <span class="selector-tag">img</span>,</span><br><span class="line"><span class="selector-class">.justified-gallery</span> &gt; <span class="selector-tag">a</span> &gt; <span class="selector-tag">a</span> &gt; <span class="selector-tag">img</span>,</span><br><span class="line"><span class="selector-class">.justified-gallery</span> &gt; <span class="selector-tag">div</span> &gt; <span class="selector-tag">a</span> &gt; <span class="selector-tag">img</span>,</span><br><span class="line"><span class="selector-class">.justified-gallery</span> &gt; <span class="selector-tag">figure</span> &gt; <span class="selector-tag">a</span> &gt; <span class="selector-tag">img</span>,</span><br><span class="line"><span class="selector-class">.justified-gallery</span> &gt; <span class="selector-tag">a</span> &gt; svg,</span><br><span class="line"><span class="selector-class">.justified-gallery</span> &gt; <span class="selector-tag">div</span> &gt; svg,</span><br><span class="line"><span class="selector-class">.justified-gallery</span> &gt; <span class="selector-tag">figure</span> &gt; svg,</span><br><span class="line"><span class="selector-class">.justified-gallery</span> &gt; <span class="selector-tag">a</span> &gt; <span class="selector-tag">a</span> &gt; svg,</span><br><span class="line"><span class="selector-class">.justified-gallery</span> &gt; <span class="selector-tag">div</span> &gt; <span class="selector-tag">a</span> &gt; svg,</span><br><span class="line"><span class="selector-class">.justified-gallery</span> &gt; <span class="selector-tag">figure</span> &gt; <span class="selector-tag">a</span> &gt; svg</span><br><span class="line">  <span class="attribute">position</span> static<span class="meta">!important</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></li><li><p>因为 Volantis 的 site-card 比 Butterfly 的 flink-card 多出了一个站点缩略图，所以需要再额外添加一条配置项。修改<code>[Blogroot]\source\_data\link.yml</code>,添加一条名为<code>siteshot</code>的配置项。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">class_name:</span> <span class="string">分组名称</span></span><br><span class="line">  <span class="attr">class_desc:</span> <span class="string">分组备注</span></span><br><span class="line">  <span class="attr">link_list:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">阿羡吖</span></span><br><span class="line">      <span class="attr">link:</span> <span class="string">https://axiandaytoy.cn/</span></span><br><span class="line">      <span class="attr">avatar:</span> <span class="string">https://axiandaytoy.cn/images/favicon.png</span></span><br><span class="line">      <span class="attr">descr:</span> <span class="string">发自己的光就好，不要吹灭别人的灯</span></span><br><span class="line">      <span class="attr">siteshot:</span> <span class="comment"># siteshot就是站点缩略图的链接。</span></span><br></pre></td></tr></table></figure></li><li><p>在<code>[Blogroot]\_config.butterfly.yml</code>中添加配置项：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 友链样式，butterfly为默认样式，volantis为站点卡片样式.flexcard为弹性卡片样式</span></span><br><span class="line"><span class="attr">flink_style:</span> <span class="string">volantis</span> <span class="comment"># butterfly | volantis | flexcard</span></span><br></pre></td></tr></table></figure></li><li><p>站点卡片添加了懒加载和图片失效替换。对应配置项为<code>[Blogroot]\_config.butterfly.yml</code>中的：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Replace Broken Images (替換無法顯示的圖片)</span></span><br><span class="line"><span class="attr">error_img:</span></span><br><span class="line">  <span class="attr">flink:</span> <span class="comment"># 头像失效替换图</span></span><br><span class="line">  <span class="attr">post_page:</span> <span class="comment"># 站点缩略图</span></span><br></pre></td></tr></table></figure></li><li><p>可能遇到的 bug：使用<code>flexcard</code>样式时，因为全站字体大小配置与本站不一致的关系，可能导致友链卡片的头像位置偏移较大。请读者按照<code>flink.styl</code>里的注释内容自己微调。</p></li></ol><div class="tip bell"><p>出处：此文转载于友链大佬 <a href="https://akilar.top/">Akilar</a> 有喜欢的同学可以去逛逛。</p></div>]]></content>
    
    
    <summary type="html">Butterfly主题友链魔改</summary>
    
    
    
    <category term="Butterfly主题" scheme="https://axiandaytoy.cn/categories/Butterfly%E4%B8%BB%E9%A2%98/"/>
    
    
    <category term="Butterfly主题" scheme="https://axiandaytoy.cn/tags/Butterfly%E4%B8%BB%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>解决hexo开启懒加载后图片无法立即显示的问题</title>
    <link href="https://axiandaytoy.cn/posts/a4de5bba/"/>
    <id>https://axiandaytoy.cn/posts/a4de5bba/</id>
    <published>2022-06-02T08:43:01.000Z</published>
    <updated>2022-06-26T09:41:41.011Z</updated>
    
    <content type="html"><![CDATA[<h2 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h2><h3 id="依旧的开篇废话"><a href="#依旧的开篇废话" class="headerlink" title="依旧的开篇废话"></a>依旧的开篇废话</h3><p>前段时间因为 <a href="https://cdn.jsdelivr.net/">免费 CDN</a> 崩掉了。博主在尝试了几天无果之后，一度摆烂了几天。😂😂（事后进行了自我反思以自我批评）。直到最近几天因为疫情封控在家，想着闲着也是闲着，就重新拾了起来。恰巧此时，博主的小伙伴，她写了一遍关于 <a href="https://codersunny.com/Butterfly-%E5%A6%82%E4%BD%95%E6%9B%BF%E6%8D%A2jsdelivr%E6%8F%90%E5%8D%87%E7%BD%91%E7%AB%99%E8%AE%BF%E9%97%AE%E9%80%9F%E5%BA%A6/">Butterfly 如何替换 jsdelivr 提升网站访问速度</a> 救博主于掉发之中啊。三下五除二就解决了这个让人头大的问题。接下来又可以开心开心的搞起啦。有想搭建博客的小伙伴可以去看看她的博客。巨细。简直就是我这种小白的福音。好了废话就不多说了，开始我们今天的主题。</p><h3 id="干货时刻"><a href="#干货时刻" class="headerlink" title="干货时刻"></a>干货时刻</h3><p>本文主要介绍<code>hexo-lazyload-image</code>插件引发的<code>bug</code>以及相关<code>API</code></p><h3 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h3><p>网站开启图片懒加载后，首次加载页面图片不显示或者是部分显示，部分一直处于 loading 中，但是刷新一次后会显示。</p><p>我的插件版本是：<code>hexo-lazyload-image v1.0.10</code></p><h3 id="问题原因"><a href="#问题原因" class="headerlink" title="问题原因"></a>问题原因</h3><p>博主为了提升网页的浏览体验，开启了<code>pjax</code>优化，其原理在于<code>pjax</code>封装了<code>ajax</code>实现局部刷新，将网站变成了单页面应用。</p><p>懒加载插件如果配置不当，将与<code>pjax</code>插件发生冲突，导致以上<code>bug</code>。</p><p>具体位置在主题配置文件下：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">pjax</span>:</span><br><span class="line">  <span class="attr">enable</span>: <span class="literal">true</span></span><br><span class="line">  <span class="attr">exclude</span>:</span><br></pre></td></tr></table></figure><h3 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h3><p>既然找到问题了 那就把它解决掉就 OK 啦。</p><p>找到<code>hexo</code>项目的根目录下的站点配置文件<code>_config.yml</code>，具体路径：<code>blog/_config.yml</code>，其中<code>blog</code>是你的项目文件夹。</p><p>找到<code>lazyload</code>配置，添上<code>isSPA: true</code>字段即可。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">lazyload</span>:</span><br><span class="line">  <span class="attr">enable</span>: <span class="literal">true</span></span><br><span class="line">  <span class="attr">onlypost</span>: <span class="literal">false</span> # optional</span><br><span class="line">  <span class="attr">calssName</span>: #可选</span><br><span class="line">  <span class="attr">loadingImg</span>: # optional eg ./images/loading.<span class="property">gif</span></span><br><span class="line">  <span class="attr">isSPA</span>: <span class="literal">true</span> # optional</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="知识拓展"><a href="#知识拓展" class="headerlink" title="知识拓展"></a>知识拓展</h3><p><code>hexo-lazyload-image</code> 插件的<code>API</code>，它共有如下配置项：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">lazyload</span>:</span><br><span class="line">  <span class="attr">enable</span>: <span class="literal">true</span></span><br><span class="line">  <span class="attr">onlypost</span>: <span class="literal">false</span> # optional</span><br><span class="line">  <span class="attr">loadingImg</span>: # optional eg ./images/loading.<span class="property">gif</span></span><br><span class="line">  <span class="attr">className</span>: # .<span class="property">e</span> .<span class="property">g</span></span><br><span class="line">  <span class="attr">isSPA</span>: <span class="literal">false</span> # optional</span><br><span class="line">  <span class="attr">preloadRatio</span>: <span class="number">3</span> # optional, <span class="keyword">default</span> is <span class="number">1</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><ul><li><p><code>onlypost</code>:</p><p>为<code>true</code> 只有路由页面或者文章的图片才会被懒加载。</p><p>为<code>fasle</code>除了站点背景图（如果有的话），整个站点的图片均会被懒加载。</p></li><li><p><code>loadingImg</code> 有指定的图片 加载指定的，没有就加在默认的图片</p></li><li><p><code>className</code>需要延迟加载的图片 <code>class</code>选择器 默认是所有图片都延迟加载 如果不为空，请填入需要延迟加载的图片<code>class</code> 选择器</p></li><li><p><code>isSPA</code></p><p>为<code>true</code>:针对单页面应用，当滚动条滚动到图片位置时就会向后端请求图片</p><p>为<code>false</code>:刷新才能请求图片。</p></li><li><p><code>preloadRatio</code>：在多少倍的可见区域时触发图片请求，默认为<code>1</code>，即当前屏幕的区域。</p></li></ul></blockquote>]]></content>
    
    
    <summary type="html">解决hexo开启懒加载后图片无法立即显示的问题</summary>
    
    
    
    <category term="Hexo" scheme="https://axiandaytoy.cn/categories/Hexo/"/>
    
    
    <category term="Hexo" scheme="https://axiandaytoy.cn/tags/Hexo/"/>
    
  </entry>
  
  <entry>
    <title>hexo博客使用 GitHub+jsdelivr cdn全自动图床搭建</title>
    <link href="https://axiandaytoy.cn/posts/7508ca2e/"/>
    <id>https://axiandaytoy.cn/posts/7508ca2e/</id>
    <published>2022-05-17T13:18:48.000Z</published>
    <updated>2022-07-17T12:38:20.440Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>如果有小伙伴儿想使用 hexo 来搭建属于自己的个人博客的话，可以参看友链的大佬和小伙伴的博客，里面有很详细的教程，从搭建到挂载、备份、魔改等简直是属于博主这种小白的福音 😍😍😍。</p><p>我们这篇文章主要是关于如何把本地的图片资源存储在码云、GitHub 等资源库上。</p><h2 id="使用软件"><a href="#使用软件" class="headerlink" title="使用软件"></a>使用软件</h2><blockquote><ul><li><p>faststone capture：又叫红绿双键，截图吸色都是很牛掰。</p></li><li><p>Typora：常用 Markdown 编辑器</p></li><li><p>Picgo：多图床整合工具</p></li></ul></blockquote><h2 id="图床"><a href="#图床" class="headerlink" title="图床"></a>图床</h2><h3 id="什么是图床"><a href="#什么是图床" class="headerlink" title="什么是图床"></a>什么是图床</h3><p>简单通俗的说，图床就是一个在网络上存储图片的地方，为了节约本地资源，图片可以外链。<br>例如: 你想写一个 markdown 的文章，markdown 用到的图片必须是一个链接地址，其间用到本地的图片需要上传到一个可以外链的服务器上，也就是所说的图床。</p><h2 id="PicGo-使用-图床管理工具"><a href="#PicGo-使用-图床管理工具" class="headerlink" title="PicGo 使用(图床管理工具)"></a>PicGo 使用(图床管理工具)</h2><p><a href="https://github.com/Molunerfinn/PicGo/releases">下载地址</a></p><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/image-20220517215128523.png" alt="image-20220517215128523"></p><p>这里可以根据自己的电脑系统下载对应的安装包。博主为 win10 64 位系统，因此下了图中所示版本。</p><h2 id="搭建过程"><a href="#搭建过程" class="headerlink" title="搭建过程"></a>搭建过程</h2><h3 id="注册-GitHub，建立图床专用仓库"><a href="#注册-GitHub，建立图床专用仓库" class="headerlink" title="注册 GitHub，建立图床专用仓库"></a>注册 GitHub，建立图床专用仓库</h3><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/image-20220517215655056.png" alt="image-20220517215655056"></p><p>然后点击下面的<code>Creating repository</code>完成创建。</p><h3 id="生成-token"><a href="#生成-token" class="headerlink" title="生成 token"></a>生成 token</h3><p>点击个人头像下的<code>Settings</code></p><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/image-20220517220253815.png" alt="image-20220517220253815"></p><p>然后再点击左侧栏最下面的<code>Developer settings</code>。</p><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/image-20220517220415089.png" alt="image-20220517220415089"></p><p>继续</p><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/image-20220517220514095.png" alt="image-20220517220514095"></p><p>如果接下来弹出需要输入密码的页面，那就输入你的 github 账号的密码即可。</p><p>只需要勾选<code> repo</code>即可。然后点击下面的 <code>Generate token</code>完成创建。然后就会生成一个<code>token</code>。<img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/image-20220517220659159.png" alt="image-20220517220659159"></p><h3 id="完成-Picgo-的配置"><a href="#完成-Picgo-的配置" class="headerlink" title="完成 Picgo 的配置"></a>完成 Picgo 的配置</h3><p>记录生成的 token,填入 picgo 设置 GitHub 图床设定 token 位置，仓库填写 用户名&#x2F;仓库名 ，分支填写 master，路径选填，自定义域名填写 <a href="https://cdn.jsdelivr.net/gh/+%E7%94%A8%E6%88%B7%E5%90%8D/%E4%BB%93%E5%BA%93%E5%90%8D,%E5%A6%82%E5%9B%BE%E6%89%80%E7%A4%BA%E3%80%82">https://cdn.jsdelivr.net/gh/+用户名/仓库名,如图所示。</a></p><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/image-20220517221552566.png" alt="image-20220517221552566"></p><h3 id="设置-typora"><a href="#设置-typora" class="headerlink" title="设置 typora"></a>设置 typora</h3><p>打开 typora 的偏好设置-图像，插入图片时选择 上传图片 ，上传服务选择 picgo.app，如图所示：</p><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/image-20220517221849157.png" alt="image-20220517221849157"></p><p>PicGo 路径选择你安装 PicGo 的文件夹然后一路选择到.exe 即可。博主第一次没有选择这个路径，导致图片上传不成功 😭😭😭。</p><p>至此 就大公告成了。大家看可以使用红绿双键、QQ 截图、微信截图直接粘贴到 typora 中，如果想修改之前的文章图片，可直接拖拽到 typora 中。typora 会自动调用 picgo 上传到 GitHub，并加好 jsdelivr cdn 链接头，替换好本地连接。简直不要太 nice😁😁😁。</p><blockquote><p>但是最近不知道为什么 <a href="https://cdn.jsdelivr.net/">https://cdn.jsdelivr.net</a> 经常就是无法访问，导致图床上的图片都无法正常显示 😥😥。简单的了解了一下，说是因为此网站使用了 HSTS。网络错误和攻击通常是暂时的,因此,此网页稍后可能 会恢复正常。所以，如果大家不是很着急的话，不妨等等，毕竟用户很多，官方肯定也会很着急的。</p></blockquote><h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><p>到这里，有关 hexo 博客图床搭建的过程就讲解完了，感谢君的阅读与观看，依然祝您一路长虹，万事顺心。拜拜咯~。</p>]]></content>
    
    
    <summary type="html">GitHub+jsdelivr cdn全自动图床搭建</summary>
    
    
    
    <category term="Hexo" scheme="https://axiandaytoy.cn/categories/Hexo/"/>
    
    
    <category term="Hexo" scheme="https://axiandaytoy.cn/tags/Hexo/"/>
    
  </entry>
  
  <entry>
    <title>使用nvm实现多版本node自由切换</title>
    <link href="https://axiandaytoy.cn/posts/2992cc67/"/>
    <id>https://axiandaytoy.cn/posts/2992cc67/</id>
    <published>2022-05-17T04:47:53.000Z</published>
    <updated>2022-06-26T09:44:41.869Z</updated>
    
    <content type="html"><![CDATA[<h2 id="使用-node-多版本切换的初衷"><a href="#使用-node-多版本切换的初衷" class="headerlink" title="使用 node 多版本切换的初衷"></a>使用 node 多版本切换的初衷</h2><blockquote><p>由于博主最近心血来潮，使用 Hexo + Butterfly 在搭建个人博客，为了不必要的麻烦，将 Node 的版本升级到了当前的最新版本 16.15.0。正是因为此次 Node 版本的升级 对我其他的项目造成了奇奇怪怪的 bug。真是一个大写的“服”。但是有时候，我们又需要使用低版本的<code>node</code>,在不借助第三方工具的情况下，我们只能卸载现有版本,安装需要的版本，这样显然很麻烦。今天就来介绍一个<code>windows</code>系统使用的<code>node</code>多版本管理工具<code>nvm</code> 。哈哈哈。话不多说。咱们开启正文。</p></blockquote><h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><p><a href="https://github.com/coreybutler/nvm-windows/releases">下载地址</a></p><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/node.png" alt="node"></p><h2 id="安装-nvm"><a href="#安装-nvm" class="headerlink" title="安装 nvm"></a>安装 nvm</h2><p><strong>*注意：安装之前必须完全卸载已安装的<code>node</code>*</strong></p><p>解压<code>.zip</code>压缩包，双击<code>nvm-setup.exe</code>开始安装，下面两个步骤需要注意：</p><ul><li>这里是设置<code>nvm</code>的安装路径</li></ul><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/webp.webp" alt="webp"></p><ul><li><p>这里是设置使用<code>nvm</code>安装<code>node</code>时，<code>node</code>的安装路径</p><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/webp-16527636354562.webp" alt="webp-16527636354562"></p></li></ul><p>安装完成后，在<code>CMD</code>命令窗口输入<code>nvm -v</code>,输出如下版本号即证明安装成功</p><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/image-20220517130718903.png" alt="image-20220517130718903"></p><h2 id="修改-nvm-配置文件（可选）"><a href="#修改-nvm-配置文件（可选）" class="headerlink" title="修改 nvm 配置文件（可选）"></a>修改 nvm 配置文件（可选）</h2><p><code>nvm</code>安装完成后，打开<code>nvm</code>安装目录下的<code>settings.txt</code>文件:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">root:</span> <span class="string">C:\Users\YH_CP\AppData\Roaming\nvm</span></span><br><span class="line"><span class="attr">path:</span> <span class="string">C:\Program</span> <span class="string">Files\nodejs</span></span><br><span class="line"><span class="attr">arch:</span> <span class="number">64</span></span><br><span class="line"><span class="attr">proxy:</span> <span class="string">none</span></span><br><span class="line"><span class="attr">node_mirror:</span> <span class="string">http://npm.taobao.org/mirrors/node/</span></span><br><span class="line"><span class="attr">npm_mirror:</span> <span class="string">https://npm.taobao.org/mirrors/npm/</span></span><br></pre></td></tr></table></figure><p>博主安装时默认安装在了 C 盘。所以默认在 C 盘下。各位小伙伴可自行修改安装位置。</p><p><code>root</code>和<code>path</code>分别是<code>nvm</code>和<code>node</code>的安装路径，这两个不要动，这是之前安装时根据你选择的路径自动生成的，这个配置文件默认也只有这两项。因为我没改配置文件，所以后面的 4 项我都没有，只是后来搜到了，就说一下，<code>arch</code>表示安装的<code>node</code>是多少位，<code>proxy</code>是设置代理，<code>node_mirror</code>是更改<code>nvm</code>下载<code>node</code>时的镜像，这里是设置为淘宝镜像，<code>npm_mirror</code>是更改<code>npm</code>下载依赖包的镜像，也是修改为了淘宝镜像。</p><h2 id="安装-Node"><a href="#安装-Node" class="headerlink" title="安装 Node"></a>安装 Node</h2><ul><li>查看<code>nvm</code>支持安装的<code>node</code>版本</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">nvm</span> <span class="string">list</span> <span class="string">available</span></span><br></pre></td></tr></table></figure><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/image-20220517131221307.png" alt="image-20220517131221307"></p><ul><li><p>使用<code>nvm install 版本号</code>安装指定版本<code>node</code></p><p>这里需要安装的版本号在 LTS 这一列。切记要安装正确对应的版本号。如果安装没有对应的版本号，会抛出异常错误。</p><p>为了满足我司项目要求，我这里安装的版本是 14.17.3。大家可根据自身情况安装。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install 14.17.3</span><br></pre></td></tr></table></figure></li></ul><p>到此处，就在我以为万事大吉使用<code>node -v</code>的时候，提示我 node 不是内部命令。这不芭比 Q 了嘛。后来我查询了一下，原来是在初次使用<code>node</code>时，需要先使用<code>nvm use 版本号</code>切换到已安装版本的<code>node</code>才可以。</p><h2 id="切换-node-版本"><a href="#切换-node-版本" class="headerlink" title="切换 node 版本"></a>切换 node 版本</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">C:\Windows\system32&gt;nvm use 14.17.3</span><br><span class="line">Now using node v14.17.3 (64-bit)</span><br></pre></td></tr></table></figure><p>如果这里不切换，你会发现之前安装 node 的那个路径下找不到 node 文件夹。</p><ul><li>至此，可以使用<code>node -v</code> <code>npm -v</code> 来查看对应的版本号。</li></ul><h2 id="多-node-版本之间的切换"><a href="#多-node-版本之间的切换" class="headerlink" title="多 node 版本之间的切换"></a>多 node 版本之间的切换</h2><p>为了演示多版本<code>node</code>切换，我这重复上面的第 4 步，安装一个最新版本的<code>node</code> 16.15.0.</p><ul><li><p>查看当前安装的所有<code>node</code>版本</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Windows\system32&gt;nvm list</span><br></pre></td></tr></table></figure><p><code>*</code>号符表示的是当前使用的版本</p></li><li><p>切换不同版本的<code>node</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">C:\Windows\system32&gt;nvm use 14.17.3</span><br><span class="line">Now using node v14.17.3 (64-bit)</span><br></pre></td></tr></table></figure><p>这里有个小问题。就是在切换版本的时候，如果你的<code>cmd</code>没有在管理员的状态下运行的话，会出现如下所示，会导致切换版本不成功的情况。</p><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/image-20220517132814152.png" alt="image-20220517132814152"></p></li></ul><h2 id="nvm-常用指令"><a href="#nvm-常用指令" class="headerlink" title="nvm 常用指令"></a>nvm 常用指令</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">nvm off                     //禁用node.js版本管理(不卸载任何东西)</span><br><span class="line">nvm on                      //启用node.js版本管理</span><br><span class="line">nvm install &lt;version&gt;       //安装指定版本node,例如nvm install 12.18.3</span><br><span class="line">nvm uninstall &lt;version&gt;     //卸载指定版本node,例如nvm uninstall 12.18.3</span><br><span class="line">nvm list                    //显示所有安装的node.js版本</span><br><span class="line">nvm list available          //显示可以安装的所有node.js的版本(windows系统)</span><br><span class="line">nvm use &lt;version&gt;           //切换到使用指定的nodejs版本，例如nvm use 12.18.3</span><br></pre></td></tr></table></figure><h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><p>到这里，使用 nvm 安装 node 的教程就结束啦。感谢您的阅读观看，祝您岁月不惊，好运长存。</p>]]></content>
    
    
    <summary type="html">使用 node 多版本切换的初衷</summary>
    
    
    
    <category term="Node" scheme="https://axiandaytoy.cn/categories/Node/"/>
    
    
    <category term="Node" scheme="https://axiandaytoy.cn/tags/Node/"/>
    
  </entry>
  
  <entry>
    <title>React被废弃的三个生命周期函数及替代函数</title>
    <link href="https://axiandaytoy.cn/posts/e188828a/"/>
    <id>https://axiandaytoy.cn/posts/e188828a/</id>
    <published>2022-05-14T06:21:15.000Z</published>
    <updated>2022-06-26T10:10:51.145Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>学习过<code>React</code>的同学应该知道 react 生命周期函数贯穿于数组的初始化、挂载、更新、销毁的整个过程。可以说配合紧密，但是随着 react 使用的深入，在业务开发中一些声明的周期函数也会带一些严重的问题，因此官方也很快做出了修正，废弃了几个容易造成严重问题的函数，并且给出来代替的函数。</p><h2 id="react-精益求精的“弃子”"><a href="#react-精益求精的“弃子”" class="headerlink" title="react 精益求精的“弃子”"></a>react 精益求精的“弃子”</h2><ol><li>componentWillMount</li><li>componentWillUpdate</li><li>componentWillReceiveProps</li></ol><h2 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h2><blockquote><p>在 componentWillMount 进行异步请求，能使数据返回的更快。但，componentWillMount 结束后，render 会立即被触发，但此时 componentWillMount 中的异步请求结果可能还未返回。一旦结果返回就会重新 render，所以说即使在 componentWillMount 就进行了异步请求，在返回数据后又会重新 render，这会导致服务端渲染场景下的冗余请求等额外问题。得不偿失，因此在 componentDidMount 来请求没太大的差别，所以官方将它废除了。<br>假如你在 compoentWillMount 中发起了一个付款请求，由于 render 阶段里的生命周期都可以重复执行，在 componentWillMount 被打断 + 重启多次后，就会发出多个付款请求。</p></blockquote><blockquote><p>或者你可能习惯在 componentWillReceiveProps (在已挂载的组件接收到 props 之前被调用)里操作 DOM(比如删除某个符合特征的元素)，那么 componentWillReceiveProps 若是执行了两次，你可能就会一口气删掉两个符合特征的元素。</p></blockquote><blockquote><p>假如在 compoenntWillReceiveProps 和 compoentWillUpdate 里滥用 setState 将导致重复渲染死循环。</p></blockquote><h2 id="新生命周期函数"><a href="#新生命周期函数" class="headerlink" title="新生命周期函数"></a>新生命周期函数</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">constructor()</span><br><span class="line">static getDerivedStateFromProps(props,state)</span><br><span class="line">shouldComponetUpdate()</span><br><span class="line">render()</span><br><span class="line">componentDidMount()</span><br><span class="line">static getSnapshotBeforeUpdate(prevprops,prevState)</span><br><span class="line">componentDidUpdate()</span><br><span class="line">componentWillUnmount()</span><br></pre></td></tr></table></figure><h2 id="挂载前顺序"><a href="#挂载前顺序" class="headerlink" title="挂载前顺序"></a>挂载前顺序</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">constructor()</span><br><span class="line">static getDerivedStateFromProps(props,state)</span><br><span class="line">render()</span><br></pre></td></tr></table></figure><h2 id="挂载后"><a href="#挂载后" class="headerlink" title="挂载后"></a>挂载后</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">componentDidMount()</span><br></pre></td></tr></table></figure><h2 id="更新前顺序"><a href="#更新前顺序" class="headerlink" title="更新前顺序"></a>更新前顺序</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">static getSnapshotBeforeUpdate(prevprops,prevState)</span><br><span class="line">shouldComponentUpdate()</span><br><span class="line">render()</span><br></pre></td></tr></table></figure><h2 id="更新后顺序"><a href="#更新后顺序" class="headerlink" title="更新后顺序"></a>更新后顺序</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">static getSnapshotBeforeUpdate(prevprops,prevState)</span><br><span class="line">componentDidMount()</span><br></pre></td></tr></table></figure><h2 id="卸载"><a href="#卸载" class="headerlink" title="卸载"></a>卸载</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">componetWillUnmount()</span><br></pre></td></tr></table></figure><h2 id="现版本废弃的生命周期钩子函数"><a href="#现版本废弃的生命周期钩子函数" class="headerlink" title="现版本废弃的生命周期钩子函数"></a>现版本废弃的生命周期钩子函数</h2><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/banner.webp"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;学习过&lt;code&gt;React&lt;/code&gt;的同学应该知道 react 生命周期函数贯穿于数组的初始化、挂载、更新、销毁的整个过程。可以说配合</summary>
      
    
    
    
    <category term="React" scheme="https://axiandaytoy.cn/categories/React/"/>
    
    
    <category term="React" scheme="https://axiandaytoy.cn/tags/React/"/>
    
  </entry>
  
</feed>

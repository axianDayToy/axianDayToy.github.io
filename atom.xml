<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>阿羡</title>
  
  
  <link href="https://axiandaytoy.cn/atom.xml" rel="self"/>
  
  <link href="https://axiandaytoy.cn/"/>
  <updated>2022-06-26T10:09:30.820Z</updated>
  <id>https://axiandaytoy.cn/</id>
  
  <author>
    <name>阿羡</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>JOSN.parse(JSON.stringify(obj))实现深拷贝的弊端</title>
    <link href="https://axiandaytoy.cn/posts/fc808795/"/>
    <id>https://axiandaytoy.cn/posts/fc808795/</id>
    <published>2022-06-04T14:54:14.000Z</published>
    <updated>2022-06-26T10:09:30.820Z</updated>
    
    <content type="html"><![CDATA[<ol><li><p>🍬 如果 obj 里面有时间对象，则<code>JSON.stringify</code>后再<code>JSON.parse</code>的结果，时间将只是字符串的形式；而不是时间对象。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> test = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;a&quot;</span>,</span><br><span class="line">  <span class="attr">date</span>: [<span class="keyword">new</span> <span class="title class_">Date</span>(<span class="number">153662760000</span>), <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="number">15400476000000</span>)],</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> b;</span><br><span class="line">b = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(test));</span><br></pre></td></tr></table></figure><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/202206042307.webp" alt="test和b的结果"></p><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/202206042308.webp"></p></li><li><p>🍡 如果 obj 里有 RegExp 、Error 对象，则序列化的结果只得到空对象。</p><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/202206042309.webp"></p></li><li><p>🍢 如果 obj 里有函数， undefined ，则序列化的结果会把函数或 undefined 丢失。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> test = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;a&quot;</span>,</span><br><span class="line">  <span class="attr">date</span>: <span class="keyword">function</span> <span class="title function_">hehe</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;肖战&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> copyed = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(test));</span><br><span class="line">test.<span class="property">name</span> = <span class="string">&quot;魏无羡&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;debugger&quot;</span>, test, copyed);</span><br></pre></td></tr></table></figure><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/202206042310.webp" alt="函数"></p><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/202206042311.webp" alt="undefined"></p></li><li><p>🍦 如果 obj 里有 NaN、infinity 和-Infinity，则序列化的结果会变为 null</p><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/202206042312.webp" alt="NaN"></p></li><li><p>🍊 <code>JSON.stringify()</code>只能序列化对象的可枚举的自有属性，例如：如果 obj 中的对象是由构造函数生成的，则使用<code>JSON.parse(JSON.stringify(obj))</code>深拷贝后，会丢弃对象<code>constructor</code>;</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(name);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> xiaozhan = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;xiaozhan&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> test = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;肖战&quot;</span>,</span><br><span class="line">  <span class="attr">date</span>: xiaozhan,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> copyed = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(test));</span><br><span class="line">test.<span class="property">name</span> = <span class="string">&quot;魏无羡&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;debugger&quot;</span>, test, copyed);</span><br></pre></td></tr></table></figure><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/202206042313.webp"></p></li><li><p>🍅 如果对象中存在循环引用的情况也是无法正确实现深拷贝。</p><blockquote><p>以上，如果拷贝的对象不涉及上面的情况，可以使用<code>JSON.parse(JSON.stringify(obj))</code>实现深拷贝，但是涉及上面的情况，可以考虑使用下面的方式实现。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 实现深拷贝函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">deepClone</span>(<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> type = <span class="variable language_">this</span>.<span class="title function_">judgeType</span>(data);</span><br><span class="line">  <span class="keyword">let</span> obj = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">if</span> (type === <span class="string">&quot;array&quot;</span>) &#123;</span><br><span class="line">    obj = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; data.<span class="property">length</span>; i++) &#123;</span><br><span class="line">      obj.<span class="title function_">push</span>(<span class="variable language_">this</span>.<span class="title function_">deepClone</span>(data[i]));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">&quot;object&quot;</span>) &#123;</span><br><span class="line">    obj = &#123;&#125;;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> data) &#123;</span><br><span class="line">      <span class="keyword">if</span> (data.<span class="title function_">hasOwnProperty</span>(key)) &#123;</span><br><span class="line">        obj[key] = <span class="variable language_">this</span>.<span class="title function_">deepClone</span>(data[key]);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> data;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">judgeType</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> toString = <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>;</span><br><span class="line">  <span class="keyword">const</span> map = &#123;</span><br><span class="line">    <span class="string">&quot;[object Boolean]&quot;</span>: <span class="string">&quot;boolean&quot;</span>,</span><br><span class="line">    <span class="string">&quot;[object Number]&quot;</span>: <span class="string">&quot;number&quot;</span>,</span><br><span class="line">    <span class="string">&quot;[object String]&quot;</span>: <span class="string">&quot;string&quot;</span>,</span><br><span class="line">    <span class="string">&quot;[object Function]&quot;</span>: <span class="string">&quot;function&quot;</span>,</span><br><span class="line">    <span class="string">&quot;[object Array]&quot;</span>: <span class="string">&quot;array&quot;</span>,</span><br><span class="line">    <span class="string">&quot;[object Date]&quot;</span>: <span class="string">&quot;date&quot;</span>,</span><br><span class="line">    <span class="string">&quot;[object RegExp]&quot;</span>: <span class="string">&quot;regExp&quot;</span>,</span><br><span class="line">    <span class="string">&quot;[object Undefined]&quot;</span>: <span class="string">&quot;undefined&quot;</span>,</span><br><span class="line">    <span class="string">&quot;[object Null]&quot;</span>: <span class="string">&quot;null&quot;</span>,</span><br><span class="line">    <span class="string">&quot;[object Object]&quot;</span>: <span class="string">&quot;object&quot;</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">if</span> (obj <span class="keyword">instanceof</span> <span class="title class_">Element</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;element&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> map[toString.<span class="title function_">call</span>(obj)];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> test = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;a&quot;</span>,</span><br><span class="line">  <span class="attr">date</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">deepClone</span>(test));</span><br><span class="line">test.<span class="property">date</span>[<span class="number">0</span>] = <span class="number">4</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(test);</span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;ol&gt;
&lt;li&gt;&lt;p&gt;🍬 如果 obj 里面有时间对象，则&lt;code&gt;JSON.stringify&lt;/code&gt;后再&lt;code&gt;JSON.parse&lt;/code&gt;的结果，时间将只是字符串的形式；而不是时间对象。&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;</summary>
      
    
    
    
    <category term="JS" scheme="https://axiandaytoy.cn/categories/JS/"/>
    
    
    <category term="JS" scheme="https://axiandaytoy.cn/tags/JS/"/>
    
  </entry>
  
  <entry>
    <title>Butterfly主题友链魔改</title>
    <link href="https://axiandaytoy.cn/posts/1eb9527c/"/>
    <id>https://axiandaytoy.cn/posts/1eb9527c/</id>
    <published>2022-06-03T05:30:39.000Z</published>
    <updated>2022-06-14T13:37:18.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="最终效果"><a href="#最终效果" class="headerlink" title="最终效果"></a>最终效果</h2><details class="folding-tag" ><summary> 预览效果 </summary>              <div class='content'>              <p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/image-20220603101155938.png"></p>              </div>            </details><h2 id="魔改步骤"><a href="#魔改步骤" class="headerlink" title="魔改步骤"></a>魔改步骤</h2><ol><li><p>在 Hexo 博客根目录<code>[Blogroot]</code>下打开终端，输入<code>hexo new page link</code>。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page <span class="built_in">link</span></span><br></pre></td></tr></table></figure></li><li><p>打开<code>[Blogroot]\source\link\index.md</code>,添加一行<code>type: &#39;link&#39;</code>:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 友情链接</span><br><span class="line">date: 2022-05-16 11:16:42</span><br><span class="line">type: &quot;link&quot;</span><br><span class="line">author: 阿羡</span><br><span class="line">---</span><br></pre></td></tr></table></figure></li><li><p>新建文件<code>[Blogroot]\source\_data\link.yml</code>,没有<code>_data</code>文件夹的话也请自己新建。以下是默认友链格式示例。打开<code>[Blogroot]\source\_data\link.yml</code>，输入：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">class_name:</span> <span class="string">分组名称</span></span><br><span class="line">  <span class="attr">class_desc:</span> <span class="string">分组备注</span></span><br><span class="line">  <span class="attr">link_list:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">阿羡吖</span></span><br><span class="line">      <span class="attr">link:</span> <span class="string">https://axiandaytoy.cn/</span></span><br><span class="line">      <span class="attr">avatar:</span> <span class="string">https://axiandaytoy.cn/images/favicon.png</span></span><br><span class="line">      <span class="attr">descr:</span> <span class="string">发自己的光就好，不要吹灭别人的灯。</span></span><br></pre></td></tr></table></figure></li><li><p>取消<code>[Blogroot]\_config.butterfly.yml</code>中<code>menu</code>配置项内<code>link</code>页面的注释。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="string">首页:</span> <span class="string">/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-home</span></span><br><span class="line">  <span class="string">宝藏音乐:</span> <span class="string">/music/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-music</span></span><br><span class="line">  <span class="string">图库:</span> <span class="string">/gallery/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-images</span></span><br><span class="line">  <span class="string">友链:</span> <span class="string">/link/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-link</span></span><br><span class="line">  <span class="comment"># Archives: /archives/ || fas fa-archive</span></span><br><span class="line">  <span class="comment"># Tags: /tags/ || fas fa-tags</span></span><br><span class="line">  <span class="comment"># Categories: /categories/ || fas fa-folder-open</span></span><br><span class="line">  <span class="comment"># List||fas fa-list:</span></span><br><span class="line">  <span class="comment">#   Movie: /movies/ || fas fa-video</span></span><br><span class="line">  <span class="comment"># About: /about/ || fas fa-heart</span></span><br></pre></td></tr></table></figure></li><li><p>修改<code>[Blogroot]\themes\butterfly\layout\includes\page\flink.pug</code>,此处添加判断机制，使得可以通过修改配置文件来切换友链风格。同时为了方便管理，把各个友链样式放到新建的文件目录<code>[Blogroot]\themes\butterfly\layout\includes\page\flink_style</code>下。</p><div class="tabs" id="test4"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test4-1">flink.pug</button></li><li class="tab"><button type="button" data-href="#test4-2">butterfly.pug</button></li><li class="tab"><button type="button" data-href="#test4-3">volantis.pug</button></li><li class="tab"><button type="button" data-href="#test4-4">flexcard.pug</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test4-1"><p>修改<code>[Blogroot]\themes\butterfly\layout\includes\page\flink.pug</code>，全部内容替换为：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">case theme.flink_style</span><br><span class="line">  when &#x27;volantis&#x27;</span><br><span class="line">    include ./flink_style/volantis.pug</span><br><span class="line">  when &#x27;flexcard&#x27;</span><br><span class="line">    include ./flink_style/flexcard.pug</span><br><span class="line">  default</span><br><span class="line">    include ./flink_style/butterfly.pug</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test4-2"><p>新建<code>[Blogroot]\themes\butterfly\layout\includes\page\flink_style\butterfly.pug</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">#article-container</span><br><span class="line">  if top_img === false</span><br><span class="line">    h1.page-title= page.title</span><br><span class="line">  .flink</span><br><span class="line">    if site.data.link</span><br><span class="line">      each i in site.data.link</span><br><span class="line">        if i.class_name</span><br><span class="line">          h2!= i.class_name</span><br><span class="line">        if i.class_desc</span><br><span class="line">          .flink-desc!=i.class_desc</span><br><span class="line">        .flink-list</span><br><span class="line">          each item in i.link_list</span><br><span class="line">            .flink-list-item</span><br><span class="line">              a(href=url_for(item.link)  title=item.name target=&quot;_blank&quot;)</span><br><span class="line">                .flink-item-icon</span><br><span class="line">                  img.no-lightbox(src=url_for(item.avatar) onerror=`this.onerror=null;this.src=&#x27;` + url_for(theme.error_img.flink) + `&#x27;` alt=item.name )</span><br><span class="line">                .flink-item-name= item.name</span><br><span class="line">                .flink-item-desc(title=item.descr)= item.descr</span><br><span class="line">  != page.content</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test4-3"><p>新建<code>[Blogroot]\themes\butterfly\layout\includes\page\flink_style\volantis.pug</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">#article-container</span><br><span class="line">  if top_img === false</span><br><span class="line">    h1.page-title= page.title</span><br><span class="line">  .flink</span><br><span class="line">    if site.data.link</span><br><span class="line">      each i in site.data.link</span><br><span class="line">        if i.class_name</span><br><span class="line">          h2!= i.class_name</span><br><span class="line">        if i.class_desc</span><br><span class="line">          .flink-desc!=i.class_desc</span><br><span class="line">        .site-card-group</span><br><span class="line">          each item in i.link_list</span><br><span class="line">            a.site-card(target=&#x27;_blank&#x27; rel=&#x27;noopener&#x27; href=url_for(item.link))</span><br><span class="line">              .img</span><br><span class="line">                - var siteshot = item.siteshot ? url_for(item.siteshot) : &#x27;https://image.thum.io/get/width/400/crop/800/allowJPG/wait/20/noanimate/&#x27; + item.link</span><br><span class="line">                img.no-lightbox(src=siteshot onerror=`this.onerror=null;this.src=&#x27;` + url_for(theme.error_img.post_page) + `&#x27;` alt=&#x27;&#x27; )</span><br><span class="line">              .info</span><br><span class="line">                img.no-lightbox(src=url_for(item.avatar) onerror=`this.onerror=null;this.src=&#x27;` + url_for(theme.error_img.flink) + `&#x27;` alt=&#x27;&#x27; )</span><br><span class="line">                span.title= item.name</span><br><span class="line">                span.desc(title=item.descr)= item.descr</span><br><span class="line">  != page.content</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test4-4"><p>新建<code>[Blogroot]\themes\butterfly\layout\includes\page\flink_style\flexcard.pug</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">#article-container</span><br><span class="line">  if top_img === false</span><br><span class="line">    h1.page-title= page.title</span><br><span class="line">  .flink</span><br><span class="line">    if site.data.link</span><br><span class="line">      each i in site.data.link</span><br><span class="line">        if i.class_name</span><br><span class="line">          h2!= i.class_name</span><br><span class="line">        if i.class_desc</span><br><span class="line">          .flink-desc!=i.class_desc</span><br><span class="line">        .flink-list</span><br><span class="line">          each item in i.link_list</span><br><span class="line">            a.flink-list-card(href=url_for(item.link) target=&#x27;_blank&#x27; data-title=item.descr)</span><br><span class="line">              .wrapper.cover</span><br><span class="line">                - var siteshot = item.siteshot ? url_for(item.siteshot) : &#x27;https://image.thum.io/get/width/400/crop/800/allowJPG/wait/20/noanimate/&#x27; + item.link</span><br><span class="line">                img.no-lightbox.cover.fadeIn(src=siteshot onerror=`this.onerror=null;this.src=&#x27;` + url_for(theme.error_img.post_page) + `&#x27;` alt=&#x27;&#x27; )</span><br><span class="line">              .info</span><br><span class="line">                img.no-lightbox(src=url_for(item.avatar) onerror=`this.onerror=null;this.src=&#x27;` + url_for(theme.error_img.flink) + `&#x27;` alt=&#x27;&#x27; )</span><br><span class="line">                span.flink-sitename= item.name</span><br><span class="line">  != page.content</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></li><li><p>修改<code>[Blogroot]\themes\butterfly\source\css\_page\flink.styl</code>,同理，将样式文件也放到新建的<code>[Blogroot]\themes\butterfly\source\css\_flink_style</code>目录下方便管理。</p><div class="tabs" id="test4"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test4-1">flink.styl</button></li><li class="tab"><button type="button" data-href="#test4-2">butterfly.styl</button></li><li class="tab"><button type="button" data-href="#test4-3">volantis.styl</button></li><li class="tab"><button type="button" data-href="#test4-4">flexcard.styl</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test4-1"><p>修改<code>[Blogroot]\themes\butterfly\source\css_page\flink.styl</code></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="built_in">hexo-config</span>(<span class="string">&#x27;flink_style&#x27;</span>) == <span class="string">&#x27;butterfly&#x27;</span></span><br><span class="line">  <span class="keyword">@import</span> <span class="string">&#x27;./_flink_style/butterfly&#x27;</span></span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> <span class="built_in">hexo-config</span>(<span class="string">&#x27;flink_style&#x27;</span>) == <span class="string">&#x27;volantis&#x27;</span></span><br><span class="line">  <span class="keyword">@import</span> <span class="string">&#x27;./_flink_style/volantis&#x27;</span></span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> <span class="built_in">hexo-config</span>(<span class="string">&#x27;flink_style&#x27;</span>) == <span class="string">&#x27;flexcard&#x27;</span></span><br><span class="line">  <span class="keyword">@import</span> <span class="string">&#x27;./_flink_style/flexcard&#x27;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test4-2"><p>新建<code>[Blogroot]\themes\butterfly\source\css_flink_style\butterfly.styl</code></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">.flink<span class="selector-id">#article-container</span></span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">20px</span></span><br><span class="line"><span class="selector-class">.flink-desc</span></span><br><span class="line">  <span class="attribute">margin</span>: .<span class="number">2rem</span> <span class="number">0</span> .<span class="number">5rem</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.flink-list</span></span><br><span class="line">  <span class="attribute">overflow</span>: auto</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">10px</span> <span class="number">0</span></span><br><span class="line">  <span class="attribute">text-align</span>: center</span><br><span class="line"></span><br><span class="line">  &amp; &gt; <span class="selector-class">.flink-list-item</span></span><br><span class="line">    <span class="attribute">position</span>: relative</span><br><span class="line">    <span class="attribute">float</span>: left</span><br><span class="line">    <span class="attribute">overflow</span>: hidden</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">15px</span> <span class="number">7px</span></span><br><span class="line">    <span class="attribute">width</span>: calc(<span class="number">100%</span> / <span class="number">3</span> - <span class="number">15px</span>)</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">90px</span></span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span></span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">17px</span></span><br><span class="line">    -webkit-<span class="attribute">transform</span>: translateZ(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    +<span class="built_in">maxWidth1024</span>()</span><br><span class="line">      <span class="attribute">width</span>: calc(<span class="number">50%</span> - <span class="number">15px</span>) <span class="meta">!important</span></span><br><span class="line"></span><br><span class="line">    +<span class="built_in">maxWidth600</span>()</span><br><span class="line">      <span class="attribute">width</span>: calc(<span class="number">100%</span> - <span class="number">15px</span>) <span class="meta">!important</span></span><br><span class="line"></span><br><span class="line">    <span class="selector-pseudo">&amp;:hover</span></span><br><span class="line">      <span class="selector-class">.flink-item-icon</span></span><br><span class="line">        <span class="attribute">margin-left</span>: -<span class="number">10px</span></span><br><span class="line">        <span class="attribute">width</span>: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="selector-pseudo">&amp;:before</span></span><br><span class="line">      <span class="attribute">position</span>: absolute</span><br><span class="line">      <span class="attribute">top</span>: <span class="number">0</span></span><br><span class="line">      <span class="attribute">right</span>: <span class="number">0</span></span><br><span class="line">      <span class="attribute">bottom</span>: <span class="number">0</span></span><br><span class="line">      <span class="attribute">left</span>: <span class="number">0</span></span><br><span class="line">      <span class="attribute">z-index</span>: -<span class="number">1</span></span><br><span class="line">      <span class="attribute">background</span>: var(--text-bg-hover)</span><br><span class="line">      <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">      <span class="attribute">transition</span>: transform .<span class="number">3s</span> ease-out</span><br><span class="line">      <span class="attribute">transform</span>: scale(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    <span class="selector-pseudo">&amp;:hover</span><span class="selector-pseudo">:before</span>,</span><br><span class="line">    <span class="selector-pseudo">&amp;:focus</span><span class="selector-pseudo">:before</span>,</span><br><span class="line">    <span class="selector-pseudo">&amp;:active</span><span class="selector-pseudo">:before</span></span><br><span class="line">      <span class="attribute">transform</span>: scale(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="selector-tag">a</span></span><br><span class="line">      <span class="attribute">color</span>: var(--font-color)</span><br><span class="line">      <span class="attribute">text-decoration</span>: none</span><br><span class="line"></span><br><span class="line">      <span class="selector-class">.flink-item-icon</span></span><br><span class="line">        <span class="attribute">float</span>: left</span><br><span class="line">        <span class="attribute">overflow</span>: hidden</span><br><span class="line">        <span class="attribute">margin</span>: <span class="number">15px</span> <span class="number">10px</span></span><br><span class="line">        <span class="attribute">width</span>: <span class="number">60px</span></span><br><span class="line">        <span class="attribute">height</span>: <span class="number">60px</span></span><br><span class="line">        <span class="attribute">border-radius</span>: <span class="number">35px</span></span><br><span class="line">        <span class="attribute">transition</span>: width .<span class="number">3s</span> ease-out</span><br><span class="line"></span><br><span class="line">        <span class="selector-tag">img</span></span><br><span class="line">          <span class="attribute">width</span>: <span class="number">100%</span></span><br><span class="line">          <span class="attribute">height</span>: <span class="number">100%</span></span><br><span class="line">          <span class="attribute">transition</span>: filter <span class="number">375ms</span> ease-in .<span class="number">2s</span>, transform .<span class="number">3s</span></span><br><span class="line">          <span class="attribute">object-fit</span>: cover</span><br><span class="line"></span><br><span class="line">      <span class="selector-class">.img-alt</span></span><br><span class="line">        <span class="attribute">display</span>: none</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.flink-item-name</span></span><br><span class="line">  <span class="keyword">@extend</span> <span class="selector-class">.limit-one-line</span></span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">16px</span> <span class="number">10px</span> <span class="number">0</span> <span class="number">0</span></span><br><span class="line">  <span class="attribute">height</span>: <span class="number">40px</span></span><br><span class="line">  <span class="attribute">font-weight</span>: bold</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">1.43em</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.flink-item-desc</span></span><br><span class="line">  <span class="keyword">@extend</span> <span class="selector-class">.limit-one-line</span></span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">16px</span> <span class="number">10px</span> <span class="number">16px</span> <span class="number">0</span></span><br><span class="line">  <span class="attribute">height</span>: <span class="number">50px</span></span><br><span class="line">  <span class="attribute">font-size</span>: .<span class="number">93em</span></span><br><span class="line"><span class="selector-class">.flink-name</span></span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">5px</span></span><br><span class="line">  <span class="attribute">font-weight</span>: bold</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">1.5em</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test4-3"><p>新建<code>[Blogroot]\themes\butterfly\source\css_flink_style\volantis.styl</code></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">trans</span><span class="params">(<span class="variable">$time</span> = <span class="number">0.28s</span>)</span></span></span><br><span class="line">  <span class="attribute">transition</span>: all <span class="variable">$time</span> ease</span><br><span class="line">  -moz-<span class="attribute">transition</span>: all <span class="variable">$time</span> ease</span><br><span class="line">  -webkit-<span class="attribute">transition</span>: all <span class="variable">$time</span> ease</span><br><span class="line">  -o-<span class="attribute">transition</span>: all <span class="variable">$time</span> ease</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.site-card-group</span></span><br><span class="line">  <span class="attribute">display</span>: flex</span><br><span class="line">  <span class="attribute">flex-wrap</span>: wrap</span><br><span class="line">  <span class="attribute">justify-content</span>: flex-start</span><br><span class="line">  <span class="attribute">margin</span>: -<span class="number">0.5</span> * <span class="number">16px</span></span><br><span class="line">  <span class="attribute">align-items</span>: stretch</span><br><span class="line"><span class="selector-class">.site-card</span></span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">16px</span> * <span class="number">0.5</span></span><br><span class="line">  <span class="attribute">width</span>: <span class="string">&quot;calc(100% / 4 - %s)&quot;</span> % <span class="number">16px</span></span><br><span class="line">  <span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>: <span class="number">2048px</span>)</span><br><span class="line">      <span class="attribute">width</span>: &quot;calc(<span class="number">100%</span> / <span class="number">5</span> - %s)&quot; % <span class="number">16px</span></span><br><span class="line">  @media screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">768px</span>)</span><br><span class="line">      <span class="attribute">width</span>: &quot;calc(<span class="number">100%</span> / <span class="number">3</span> - %s)&quot; % <span class="number">16px</span></span><br><span class="line">  @media screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">500px</span>)</span><br><span class="line">      <span class="attribute">width</span>: &quot;calc(<span class="number">100%</span> / <span class="number">2</span> - %s)&quot; % <span class="number">16px</span></span><br><span class="line">  display: block</span><br><span class="line">  line-height: <span class="number">1.4</span></span><br><span class="line">  <span class="attribute">height</span> <span class="number">100%</span></span><br><span class="line">  .img</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span></span><br><span class="line">    <span class="attribute">height</span> <span class="number">120px</span></span><br><span class="line">    @media screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">500px</span>)</span><br><span class="line">      <span class="attribute">height</span> <span class="number">100px</span></span><br><span class="line">    overflow: hidden</span><br><span class="line">    border-radius: <span class="number">12px</span> * <span class="number">0.5</span></span><br><span class="line">    box-shadow: <span class="number">0</span> <span class="number">1px</span> <span class="number">2px</span> <span class="number">0px</span> rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.2</span>)</span><br><span class="line">    background: #f6f6f6</span><br><span class="line">    img</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">100%</span></span><br><span class="line">      <span class="attribute">height</span> <span class="number">100%</span></span><br><span class="line">      pointer-events:none;</span><br><span class="line">      <span class="comment">// trans(.75s)</span></span><br><span class="line">      <span class="attribute">transition</span>: transform <span class="number">2s</span> ease</span><br><span class="line">      <span class="attribute">object-fit</span>: cover</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.info</span></span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">16px</span> * <span class="number">0.5</span></span><br><span class="line">    <span class="selector-tag">img</span></span><br><span class="line">      <span class="attribute">width</span>: <span class="number">32px</span></span><br><span class="line">      <span class="attribute">height</span>: <span class="number">32px</span></span><br><span class="line">      <span class="attribute">pointer-events</span>:none;</span><br><span class="line">      <span class="attribute">border-radius</span>: <span class="number">16px</span></span><br><span class="line">      <span class="attribute">float</span>: left</span><br><span class="line">      <span class="attribute">margin-right</span>: <span class="number">8px</span></span><br><span class="line">      <span class="attribute">margin-top</span>: <span class="number">2px</span></span><br><span class="line">    <span class="selector-tag">span</span></span><br><span class="line">      <span class="attribute">display</span>: block</span><br><span class="line">    <span class="selector-class">.title</span></span><br><span class="line">      <span class="attribute">font-weight</span>: <span class="number">600</span></span><br><span class="line">      <span class="attribute">font-size</span>: var(--global-font-size)</span><br><span class="line">      <span class="attribute">color</span>: <span class="number">#444</span></span><br><span class="line">      <span class="attribute">display</span>: -webkit-box</span><br><span class="line">      -webkit-box-orient: vertical</span><br><span class="line">      <span class="attribute">overflow</span>: hidden</span><br><span class="line">      -webkit-line-clamp: <span class="number">1</span></span><br><span class="line">      <span class="built_in">trans</span>()</span><br><span class="line">    <span class="selector-class">.desc</span></span><br><span class="line">      <span class="attribute">font-size</span>: var(--global-font-size)</span><br><span class="line">      <span class="attribute">word-wrap</span>: break-word;</span><br><span class="line">      <span class="attribute">line-height</span>: <span class="number">1.2</span></span><br><span class="line">      <span class="attribute">color</span>: <span class="number">#888</span></span><br><span class="line">      <span class="attribute">display</span>: -webkit-box</span><br><span class="line">      -webkit-box-orient: vertical</span><br><span class="line">      <span class="attribute">overflow</span>: hidden</span><br><span class="line">      -webkit-line-clamp: <span class="number">2</span></span><br><span class="line">  <span class="selector-class">.img</span></span><br><span class="line">    <span class="built_in">trans</span>()</span><br><span class="line">  <span class="selector-pseudo">&amp;:hover</span></span><br><span class="line">    <span class="selector-class">.img</span></span><br><span class="line">      <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">4px</span> <span class="number">8px</span> <span class="number">0px</span> rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>), <span class="number">0</span> <span class="number">2px</span> <span class="number">4px</span> <span class="number">0px</span> rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>), <span class="number">0</span> <span class="number">4px</span> <span class="number">8px</span> <span class="number">0px</span> rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>), <span class="number">0</span> <span class="number">8px</span> <span class="number">16px</span> <span class="number">0px</span> rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>)</span><br><span class="line">    <span class="selector-class">.info</span> <span class="selector-class">.title</span></span><br><span class="line">      <span class="attribute">color</span>: <span class="number">#ff5722</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test4-4"><p>新建<code>[Blogroot]\themes\butterfly\source\css\_flink_style\flexcard.styl</code></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#article-container</span> <span class="selector-tag">img</span></span><br><span class="line">  <span class="attribute">margin</span> <span class="number">0</span> auto<span class="meta">!important</span></span><br><span class="line"><span class="selector-class">.flink-list</span></span><br><span class="line">  <span class="attribute">overflow</span> auto</span><br><span class="line">  &amp; &gt; <span class="selector-tag">a</span></span><br><span class="line">    <span class="attribute">width</span> calc(<span class="number">25%</span> - <span class="number">15px</span>)</span><br><span class="line">    <span class="attribute">height</span> <span class="number">130px</span></span><br><span class="line">    <span class="attribute">position</span> relative</span><br><span class="line">    <span class="attribute">display</span> block</span><br><span class="line">    <span class="attribute">margin</span> <span class="number">15px</span> <span class="number">7px</span></span><br><span class="line">    <span class="attribute">float</span> left</span><br><span class="line">    <span class="attribute">overflow</span> hidden</span><br><span class="line">    <span class="attribute">border-radius</span> <span class="number">10px</span></span><br><span class="line">    <span class="attribute">transition</span> all .<span class="number">3s</span> ease <span class="number">0s</span>, transform .<span class="number">6s</span> cubic-bezier(.<span class="number">6</span>, .<span class="number">2</span>, .<span class="number">1</span>, <span class="number">1</span>) <span class="number">0s</span></span><br><span class="line">    <span class="attribute">box-shadow</span> <span class="number">0</span> <span class="number">14px</span> <span class="number">38px</span> rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, .<span class="number">08</span>), <span class="number">0</span> <span class="number">3px</span> <span class="number">8px</span> rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, .<span class="number">06</span>)</span><br><span class="line">    <span class="selector-pseudo">&amp;:hover</span></span><br><span class="line">      <span class="selector-class">.info</span></span><br><span class="line">        <span class="attribute">transform</span> translateY(-<span class="number">100%</span>)</span><br><span class="line">      <span class="selector-class">.wrapper</span></span><br><span class="line">        <span class="selector-tag">img</span></span><br><span class="line">          <span class="attribute">transform</span> scale(<span class="number">1.2</span>)</span><br><span class="line">      <span class="selector-pseudo">&amp;::before</span></span><br><span class="line">        <span class="attribute">position</span>: fixed</span><br><span class="line">        <span class="attribute">width</span>:inherit</span><br><span class="line">        <span class="attribute">margin</span>:auto</span><br><span class="line">        <span class="attribute">left</span>:<span class="number">0</span></span><br><span class="line">        <span class="attribute">right</span>:<span class="number">0</span></span><br><span class="line">        <span class="attribute">top</span>:<span class="number">10%</span></span><br><span class="line">        <span class="attribute">border-radius</span>: <span class="number">10px</span></span><br><span class="line">        <span class="attribute">text-align</span>: center</span><br><span class="line">        <span class="attribute">z-index</span>: <span class="number">100</span></span><br><span class="line">        <span class="attribute">content</span>: attr(data-title)</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">20px</span></span><br><span class="line">        <span class="attribute">color</span>: <span class="number">#fff</span></span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">10px</span></span><br><span class="line">        <span class="attribute">background-color</span>: rgba(<span class="variable">$theme</span>-color,<span class="number">0.8</span>)</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.cover</span></span><br><span class="line">      <span class="attribute">width</span> <span class="number">100%</span></span><br><span class="line">      <span class="attribute">transition</span> transform .<span class="number">5s</span> ease-out</span><br><span class="line">    <span class="selector-class">.wrapper</span></span><br><span class="line">      <span class="attribute">position</span> relative</span><br><span class="line">      <span class="selector-class">.fadeIn</span></span><br><span class="line">        <span class="attribute">animation</span> coverIn .<span class="number">8s</span> ease-out forwards</span><br><span class="line">      <span class="selector-tag">img</span></span><br><span class="line">        <span class="attribute">height</span> <span class="number">130px</span></span><br><span class="line">        <span class="attribute">pointer-events</span> none</span><br><span class="line">    <span class="selector-class">.info</span></span><br><span class="line">      <span class="attribute">display</span> flex</span><br><span class="line">      <span class="attribute">flex-direction</span> column</span><br><span class="line">      <span class="attribute">justify-content</span> center</span><br><span class="line">      <span class="attribute">align-items</span> center</span><br><span class="line">      <span class="attribute">width</span> <span class="number">100%</span></span><br><span class="line">      <span class="attribute">height</span> <span class="number">100%</span></span><br><span class="line">      <span class="attribute">overflow</span> hidden</span><br><span class="line">      <span class="attribute">border-radius</span> <span class="number">3px</span></span><br><span class="line">      <span class="attribute">background-color</span> hsla(<span class="number">0</span>, <span class="number">0%</span>, <span class="number">100%</span>, .<span class="number">7</span>)</span><br><span class="line">      <span class="attribute">transition</span> transform .<span class="number">5s</span> cubic-bezier(.<span class="number">6</span>, .<span class="number">2</span>, .<span class="number">1</span>, <span class="number">1</span>) <span class="number">0s</span></span><br><span class="line">      <span class="selector-tag">img</span></span><br><span class="line">        <span class="attribute">position</span> relative</span><br><span class="line">        <span class="attribute">top</span> <span class="number">22px</span></span><br><span class="line">        <span class="attribute">width</span> <span class="number">66px</span></span><br><span class="line">        <span class="attribute">height</span> <span class="number">66px</span></span><br><span class="line">        <span class="attribute">border-radius</span> <span class="number">50%</span></span><br><span class="line">        <span class="attribute">box-shadow</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, .<span class="number">3</span>)</span><br><span class="line">        <span class="attribute">z-index</span> <span class="number">1</span></span><br><span class="line">        <span class="attribute">text-align</span> center</span><br><span class="line">        <span class="attribute">pointer-events</span> none</span><br><span class="line">      <span class="selector-tag">span</span></span><br><span class="line">        <span class="attribute">padding</span> <span class="number">20px</span> <span class="number">10%</span> <span class="number">60px</span> <span class="number">10%</span></span><br><span class="line">        <span class="attribute">font-size</span> <span class="number">16px</span></span><br><span class="line">        <span class="attribute">width</span> <span class="number">100%</span></span><br><span class="line">        <span class="attribute">text-align</span> center</span><br><span class="line">        <span class="attribute">box-shadow</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, .<span class="number">3</span>)</span><br><span class="line">        <span class="attribute">background-color</span> hsla(<span class="number">0</span>, <span class="number">0%</span>, <span class="number">100%</span>, .<span class="number">7</span>)</span><br><span class="line">        <span class="attribute">color</span> var(--font-color)</span><br><span class="line">        <span class="attribute">white-space</span> nowrap</span><br><span class="line">        <span class="attribute">overflow</span> hidden</span><br><span class="line">        <span class="attribute">text-overflow</span> ellipsis</span><br><span class="line">.flink-list&gt;<span class="selector-tag">a</span> <span class="selector-class">.info</span>,</span><br><span class="line">.flink-list&gt;<span class="selector-tag">a</span> <span class="selector-class">.wrapper</span> <span class="selector-class">.cover</span></span><br><span class="line">  <span class="attribute">position</span> absolute</span><br><span class="line">  <span class="attribute">top</span> <span class="number">0</span></span><br><span class="line">  <span class="attribute">left</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>:<span class="number">1024px</span>)</span><br><span class="line">  .flink-list</span><br><span class="line">    &amp; &gt; a</span><br><span class="line">      <span class="attribute">width</span> calc(<span class="number">33.33333%</span> - <span class="number">15px</span>)</span><br><span class="line"></span><br><span class="line">@media screen <span class="keyword">and</span> (<span class="attribute">max-width</span>:<span class="number">600px</span>)</span><br><span class="line">  .flink-list</span><br><span class="line">    &amp; &gt; a</span><br><span class="line">      <span class="attribute">width</span> calc(<span class="number">50%</span> - <span class="number">15px</span>)</span><br><span class="line"></span><br><span class="line">[data-theme=dark]</span><br><span class="line">  .flink-list a .info,</span><br><span class="line">  .flink-list a .info span</span><br><span class="line">    background-color rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, .<span class="number">6</span>)</span><br><span class="line">  .flink-list</span><br><span class="line">    &amp; &gt; a</span><br><span class="line">      &amp;:<span class="attribute">hover</span></span><br><span class="line">        &amp;:before</span><br><span class="line">          background-color: rgba(#<span class="number">121212</span>,<span class="number">0.8</span>);</span><br><span class="line"><span class="selector-class">.justified-gallery</span> &gt; <span class="selector-tag">div</span> &gt; <span class="selector-tag">img</span>,</span><br><span class="line"><span class="selector-class">.justified-gallery</span> &gt; <span class="selector-tag">figure</span> &gt; <span class="selector-tag">img</span>,</span><br><span class="line"><span class="selector-class">.justified-gallery</span> &gt; <span class="selector-tag">a</span> &gt; <span class="selector-tag">a</span> &gt; <span class="selector-tag">img</span>,</span><br><span class="line"><span class="selector-class">.justified-gallery</span> &gt; <span class="selector-tag">div</span> &gt; <span class="selector-tag">a</span> &gt; <span class="selector-tag">img</span>,</span><br><span class="line"><span class="selector-class">.justified-gallery</span> &gt; <span class="selector-tag">figure</span> &gt; <span class="selector-tag">a</span> &gt; <span class="selector-tag">img</span>,</span><br><span class="line"><span class="selector-class">.justified-gallery</span> &gt; <span class="selector-tag">a</span> &gt; svg,</span><br><span class="line"><span class="selector-class">.justified-gallery</span> &gt; <span class="selector-tag">div</span> &gt; svg,</span><br><span class="line"><span class="selector-class">.justified-gallery</span> &gt; <span class="selector-tag">figure</span> &gt; svg,</span><br><span class="line"><span class="selector-class">.justified-gallery</span> &gt; <span class="selector-tag">a</span> &gt; <span class="selector-tag">a</span> &gt; svg,</span><br><span class="line"><span class="selector-class">.justified-gallery</span> &gt; <span class="selector-tag">div</span> &gt; <span class="selector-tag">a</span> &gt; svg,</span><br><span class="line"><span class="selector-class">.justified-gallery</span> &gt; <span class="selector-tag">figure</span> &gt; <span class="selector-tag">a</span> &gt; svg</span><br><span class="line">  <span class="attribute">position</span> static<span class="meta">!important</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></li><li><p>因为 Volantis 的 site-card 比 Butterfly 的 flink-card 多出了一个站点缩略图，所以需要再额外添加一条配置项。修改<code>[Blogroot]\source\_data\link.yml</code>,添加一条名为<code>siteshot</code>的配置项。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">class_name:</span> <span class="string">分组名称</span></span><br><span class="line">  <span class="attr">class_desc:</span> <span class="string">分组备注</span></span><br><span class="line">  <span class="attr">link_list:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">阿羡吖</span></span><br><span class="line">      <span class="attr">link:</span> <span class="string">https://axiandaytoy.cn/</span></span><br><span class="line">      <span class="attr">avatar:</span> <span class="string">https://axiandaytoy.cn/images/favicon.png</span></span><br><span class="line">      <span class="attr">descr:</span> <span class="string">发自己的光就好，不要吹灭别人的灯</span></span><br><span class="line">      <span class="attr">siteshot:</span> <span class="comment"># siteshot就是站点缩略图的链接。</span></span><br></pre></td></tr></table></figure></li><li><p>在<code>[Blogroot]\_config.butterfly.yml</code>中添加配置项：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 友链样式，butterfly为默认样式，volantis为站点卡片样式.flexcard为弹性卡片样式</span></span><br><span class="line"><span class="attr">flink_style:</span> <span class="string">volantis</span> <span class="comment"># butterfly | volantis | flexcard</span></span><br></pre></td></tr></table></figure></li><li><p>站点卡片添加了懒加载和图片失效替换。对应配置项为<code>[Blogroot]\_config.butterfly.yml</code>中的：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Replace Broken Images (替換無法顯示的圖片)</span></span><br><span class="line"><span class="attr">error_img:</span></span><br><span class="line">  <span class="attr">flink:</span> <span class="comment"># 头像失效替换图</span></span><br><span class="line">  <span class="attr">post_page:</span> <span class="comment"># 站点缩略图</span></span><br></pre></td></tr></table></figure></li><li><p>可能遇到的 bug：使用<code>flexcard</code>样式时，因为全站字体大小配置与本站不一致的关系，可能导致友链卡片的头像位置偏移较大。请读者按照<code>flink.styl</code>里的注释内容自己微调。</p></li></ol><div class="tip bell"><p>出处：此文转载于友链大佬 <a href="https://akilar.top/">Akilar</a> 有喜欢的同学可以去逛逛。</p></div>]]></content>
    
    
    <summary type="html">Butterfly主题友链魔改</summary>
    
    
    
    <category term="Butterfly主题" scheme="https://axiandaytoy.cn/categories/Butterfly%E4%B8%BB%E9%A2%98/"/>
    
    
    <category term="Butterfly主题" scheme="https://axiandaytoy.cn/tags/Butterfly%E4%B8%BB%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>解决hexo开启懒加载后图片无法立即显示的问题</title>
    <link href="https://axiandaytoy.cn/posts/a4de5bba/"/>
    <id>https://axiandaytoy.cn/posts/a4de5bba/</id>
    <published>2022-06-02T08:43:01.000Z</published>
    <updated>2022-06-26T09:41:41.011Z</updated>
    
    <content type="html"><![CDATA[<h2 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h2><h3 id="依旧的开篇废话"><a href="#依旧的开篇废话" class="headerlink" title="依旧的开篇废话"></a>依旧的开篇废话</h3><p>前段时间因为 <a href="https://cdn.jsdelivr.net/">免费 CDN</a> 崩掉了。博主在尝试了几天无果之后，一度摆烂了几天。😂😂（事后进行了自我反思以自我批评）。直到最近几天因为疫情封控在家，想着闲着也是闲着，就重新拾了起来。恰巧此时，博主的小伙伴，她写了一遍关于 <a href="https://codersunny.com/Butterfly-%E5%A6%82%E4%BD%95%E6%9B%BF%E6%8D%A2jsdelivr%E6%8F%90%E5%8D%87%E7%BD%91%E7%AB%99%E8%AE%BF%E9%97%AE%E9%80%9F%E5%BA%A6/">Butterfly 如何替换 jsdelivr 提升网站访问速度</a> 救博主于掉发之中啊。三下五除二就解决了这个让人头大的问题。接下来又可以开心开心的搞起啦。有想搭建博客的小伙伴可以去看看她的博客。巨细。简直就是我这种小白的福音。好了废话就不多说了，开始我们今天的主题。</p><h3 id="干货时刻"><a href="#干货时刻" class="headerlink" title="干货时刻"></a>干货时刻</h3><p>本文主要介绍<code>hexo-lazyload-image</code>插件引发的<code>bug</code>以及相关<code>API</code></p><h3 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h3><p>网站开启图片懒加载后，首次加载页面图片不显示或者是部分显示，部分一直处于 loading 中，但是刷新一次后会显示。</p><p>我的插件版本是：<code>hexo-lazyload-image v1.0.10</code></p><h3 id="问题原因"><a href="#问题原因" class="headerlink" title="问题原因"></a>问题原因</h3><p>博主为了提升网页的浏览体验，开启了<code>pjax</code>优化，其原理在于<code>pjax</code>封装了<code>ajax</code>实现局部刷新，将网站变成了单页面应用。</p><p>懒加载插件如果配置不当，将与<code>pjax</code>插件发生冲突，导致以上<code>bug</code>。</p><p>具体位置在主题配置文件下：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">pjax</span>:</span><br><span class="line">  <span class="attr">enable</span>: <span class="literal">true</span></span><br><span class="line">  <span class="attr">exclude</span>:</span><br></pre></td></tr></table></figure><h3 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h3><p>既然找到问题了 那就把它解决掉就 OK 啦。</p><p>找到<code>hexo</code>项目的根目录下的站点配置文件<code>_config.yml</code>，具体路径：<code>blog/_config.yml</code>，其中<code>blog</code>是你的项目文件夹。</p><p>找到<code>lazyload</code>配置，添上<code>isSPA: true</code>字段即可。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">lazyload</span>:</span><br><span class="line">  <span class="attr">enable</span>: <span class="literal">true</span></span><br><span class="line">  <span class="attr">onlypost</span>: <span class="literal">false</span> # optional</span><br><span class="line">  <span class="attr">calssName</span>: #可选</span><br><span class="line">  <span class="attr">loadingImg</span>: # optional eg ./images/loading.<span class="property">gif</span></span><br><span class="line">  <span class="attr">isSPA</span>: <span class="literal">true</span> # optional</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="知识拓展"><a href="#知识拓展" class="headerlink" title="知识拓展"></a>知识拓展</h3><p><code>hexo-lazyload-image</code> 插件的<code>API</code>，它共有如下配置项：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">lazyload</span>:</span><br><span class="line">  <span class="attr">enable</span>: <span class="literal">true</span></span><br><span class="line">  <span class="attr">onlypost</span>: <span class="literal">false</span> # optional</span><br><span class="line">  <span class="attr">loadingImg</span>: # optional eg ./images/loading.<span class="property">gif</span></span><br><span class="line">  <span class="attr">className</span>: # .<span class="property">e</span> .<span class="property">g</span></span><br><span class="line">  <span class="attr">isSPA</span>: <span class="literal">false</span> # optional</span><br><span class="line">  <span class="attr">preloadRatio</span>: <span class="number">3</span> # optional, <span class="keyword">default</span> is <span class="number">1</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><ul><li><p><code>onlypost</code>:</p><p>为<code>true</code> 只有路由页面或者文章的图片才会被懒加载。</p><p>为<code>fasle</code>除了站点背景图（如果有的话），整个站点的图片均会被懒加载。</p></li><li><p><code>loadingImg</code> 有指定的图片 加载指定的，没有就加在默认的图片</p></li><li><p><code>className</code>需要延迟加载的图片 <code>class</code>选择器 默认是所有图片都延迟加载 如果不为空，请填入需要延迟加载的图片<code>class</code> 选择器</p></li><li><p><code>isSPA</code></p><p>为<code>true</code>:针对单页面应用，当滚动条滚动到图片位置时就会向后端请求图片</p><p>为<code>false</code>:刷新才能请求图片。</p></li><li><p><code>preloadRatio</code>：在多少倍的可见区域时触发图片请求，默认为<code>1</code>，即当前屏幕的区域。</p></li></ul></blockquote>]]></content>
    
    
    <summary type="html">解决hexo开启懒加载后图片无法立即显示的问题</summary>
    
    
    
    <category term="Hexo" scheme="https://axiandaytoy.cn/categories/Hexo/"/>
    
    
    <category term="Hexo" scheme="https://axiandaytoy.cn/tags/Hexo/"/>
    
  </entry>
  
  <entry>
    <title>hexo博客使用 GitHub+jsdelivr cdn全自动图床搭建</title>
    <link href="https://axiandaytoy.cn/posts/7508ca2e/"/>
    <id>https://axiandaytoy.cn/posts/7508ca2e/</id>
    <published>2022-05-17T13:18:48.000Z</published>
    <updated>2022-06-26T10:12:26.680Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>如果有小伙伴儿想使用 hexo 来搭建属于自己的个人博客的话，可以参看友链的大佬和小伙伴的博客，里面有很详细的教程，从搭建到挂载、备份、魔改等简直是属于博主这种小白的福音 😍😍😍。</p><p>我们这篇文章主要是关于如何把本地的图片资源存储在码云、GitHub 等资源库上。</p><h2 id="使用软件"><a href="#使用软件" class="headerlink" title="使用软件"></a>使用软件</h2><blockquote><ul><li><p>faststone capture：又叫红绿双键，截图吸色都是很牛掰。</p></li><li><p>Typora：常用 Markdown 编辑器</p></li><li><p>Picgo：多图床整合工具</p></li></ul></blockquote><h2 id="图床"><a href="#图床" class="headerlink" title="图床"></a>图床</h2><h3 id="什么是图床"><a href="#什么是图床" class="headerlink" title="什么是图床"></a>什么是图床</h3><p>简单通俗的说，图床就是一个在网络上存储图片的地方，为了节约本地资源，图片可以外链。<br>例如: 你想写一个 markdown 的文章，markdown 用到的图片必须是一个链接地址，其间用到本地的图片需要上传到一个可以外链的服务器上，也就是所说的图床。</p><h2 id="PicGo-使用-图床管理工具"><a href="#PicGo-使用-图床管理工具" class="headerlink" title="PicGo 使用(图床管理工具)"></a>PicGo 使用(图床管理工具)</h2><p><a href="https://github.com/Molunerfinn/PicGo/releases">下载地址</a></p><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/image-20220517215128523.png" alt="image-20220517215128523"></p><p>这里可以根据自己的电脑系统下载对应的安装包。博主为 win10 64 位系统，因此下了图中所示版本。</p><h2 id="搭建过程"><a href="#搭建过程" class="headerlink" title="搭建过程"></a>搭建过程</h2><h3 id="注册-GitHub，建立图床专用仓库"><a href="#注册-GitHub，建立图床专用仓库" class="headerlink" title="注册 GitHub，建立图床专用仓库"></a>注册 GitHub，建立图床专用仓库</h3><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/image-20220517215655056.png" alt="image-20220517215655056"></p><p>然后点击下面的<code>Creating repository</code>完成创建。</p><h3 id="生成-token"><a href="#生成-token" class="headerlink" title="生成 token"></a>生成 token</h3><p>点击个人头像下的<code>Settings</code></p><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/image-20220517220253815.png" alt="image-20220517220253815"></p><p>然后再点击左侧栏最下面的<code>Developer settings</code>。</p><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/image-20220517220415089.png" alt="image-20220517220415089"></p><p>继续</p><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/image-20220517220514095.png" alt="image-20220517220514095"></p><p>如果接下来弹出需要输入密码的页面，那就输入你的 github 账号的密码即可。</p><p>只需要勾选<code> repo</code>即可。然后点击下面的 <code>Generate token</code>完成创建。然后就会生成一个<code>token</code>。<img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/image-20220517220659159.png" alt="image-20220517220659159"></p><h3 id="完成-Picgo-的配置"><a href="#完成-Picgo-的配置" class="headerlink" title="完成 Picgo 的配置"></a>完成 Picgo 的配置</h3><p>记录生成的 token,填入 picgo 设置 GitHub 图床设定 token 位置，仓库填写 用户名&#x2F;仓库名 ，分支填写 master，路径选填，自定义域名填写 <a href="https://cdn.jsdelivr.net/gh/+%E7%94%A8%E6%88%B7%E5%90%8D/%E4%BB%93%E5%BA%93%E5%90%8D,%E5%A6%82%E5%9B%BE%E6%89%80%E7%A4%BA%E3%80%82">https://cdn.jsdelivr.net/gh/+用户名/仓库名,如图所示。</a></p><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/image-20220517221552566.png" alt="image-20220517221552566"></p><h3 id="设置-typora"><a href="#设置-typora" class="headerlink" title="设置 typora"></a>设置 typora</h3><p>打开 typora 的偏好设置-图像，插入图片时选择 上传图片 ，上传服务选择 picgo.app，如图所示：</p><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/image-20220517221849157.png" alt="image-20220517221849157"></p><p>PicGo 路径选择你安装 PicGo 的文件夹然后一路选择到.exe 即可。博主第一次没有选择这个路径，导致图片上传不成功 😭😭😭。</p><p>至此 就大公告成了。大家看可以使用红绿双键、QQ 截图、微信截图直接粘贴到 typora 中，如果想修改之前的文章图片，可直接拖拽到 typora 中。typora 会自动调用 picgo 上传到 GitHub，并加好 jsdelivr cdn 链接头，替换好本地连接。简直不要太 nice😁😁😁。</p><blockquote><p>但是最近不知道为什么 <a href="https://cdn.jsdelivr.net/">https://cdn.jsdelivr.net</a> 经常就是无法访问，导致图床上的图片都无法正常显示 😥😥。简单的了解了一下，说是因为此网站使用了 HSTS。网络错误和攻击通常是暂时的,因此,此网页稍后可能 会恢复正常。所以，如果大家不是很着急的话，不妨等等，毕竟用户很多，官方肯定也会很着急的。</p></blockquote><h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><p>到这里，有关 hexo 博客图床搭建的过程就讲解完了，感谢君的阅读与观看，依然祝您一路长虹，万事顺心。拜拜咯~。</p>]]></content>
    
    
    <summary type="html">GitHub+jsdelivr cdn全自动图床搭建</summary>
    
    
    
    <category term="Hexo" scheme="https://axiandaytoy.cn/categories/Hexo/"/>
    
    
    <category term="Hexo" scheme="https://axiandaytoy.cn/tags/Hexo/"/>
    
  </entry>
  
  <entry>
    <title>使用nvm实现多版本node自由切换</title>
    <link href="https://axiandaytoy.cn/posts/2992cc67/"/>
    <id>https://axiandaytoy.cn/posts/2992cc67/</id>
    <published>2022-05-17T04:47:53.000Z</published>
    <updated>2022-06-26T09:44:41.869Z</updated>
    
    <content type="html"><![CDATA[<h2 id="使用-node-多版本切换的初衷"><a href="#使用-node-多版本切换的初衷" class="headerlink" title="使用 node 多版本切换的初衷"></a>使用 node 多版本切换的初衷</h2><blockquote><p>由于博主最近心血来潮，使用 Hexo + Butterfly 在搭建个人博客，为了不必要的麻烦，将 Node 的版本升级到了当前的最新版本 16.15.0。正是因为此次 Node 版本的升级 对我其他的项目造成了奇奇怪怪的 bug。真是一个大写的“服”。但是有时候，我们又需要使用低版本的<code>node</code>,在不借助第三方工具的情况下，我们只能卸载现有版本,安装需要的版本，这样显然很麻烦。今天就来介绍一个<code>windows</code>系统使用的<code>node</code>多版本管理工具<code>nvm</code> 。哈哈哈。话不多说。咱们开启正文。</p></blockquote><h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><p><a href="https://github.com/coreybutler/nvm-windows/releases">下载地址</a></p><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/node.png" alt="node"></p><h2 id="安装-nvm"><a href="#安装-nvm" class="headerlink" title="安装 nvm"></a>安装 nvm</h2><p><strong>*注意：安装之前必须完全卸载已安装的<code>node</code>*</strong></p><p>解压<code>.zip</code>压缩包，双击<code>nvm-setup.exe</code>开始安装，下面两个步骤需要注意：</p><ul><li>这里是设置<code>nvm</code>的安装路径</li></ul><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/webp.webp" alt="webp"></p><ul><li><p>这里是设置使用<code>nvm</code>安装<code>node</code>时，<code>node</code>的安装路径</p><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/webp-16527636354562.webp" alt="webp-16527636354562"></p></li></ul><p>安装完成后，在<code>CMD</code>命令窗口输入<code>nvm -v</code>,输出如下版本号即证明安装成功</p><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/image-20220517130718903.png" alt="image-20220517130718903"></p><h2 id="修改-nvm-配置文件（可选）"><a href="#修改-nvm-配置文件（可选）" class="headerlink" title="修改 nvm 配置文件（可选）"></a>修改 nvm 配置文件（可选）</h2><p><code>nvm</code>安装完成后，打开<code>nvm</code>安装目录下的<code>settings.txt</code>文件:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">root:</span> <span class="string">C:\Users\YH_CP\AppData\Roaming\nvm</span></span><br><span class="line"><span class="attr">path:</span> <span class="string">C:\Program</span> <span class="string">Files\nodejs</span></span><br><span class="line"><span class="attr">arch:</span> <span class="number">64</span></span><br><span class="line"><span class="attr">proxy:</span> <span class="string">none</span></span><br><span class="line"><span class="attr">node_mirror:</span> <span class="string">http://npm.taobao.org/mirrors/node/</span></span><br><span class="line"><span class="attr">npm_mirror:</span> <span class="string">https://npm.taobao.org/mirrors/npm/</span></span><br></pre></td></tr></table></figure><p>博主安装时默认安装在了 C 盘。所以默认在 C 盘下。各位小伙伴可自行修改安装位置。</p><p><code>root</code>和<code>path</code>分别是<code>nvm</code>和<code>node</code>的安装路径，这两个不要动，这是之前安装时根据你选择的路径自动生成的，这个配置文件默认也只有这两项。因为我没改配置文件，所以后面的 4 项我都没有，只是后来搜到了，就说一下，<code>arch</code>表示安装的<code>node</code>是多少位，<code>proxy</code>是设置代理，<code>node_mirror</code>是更改<code>nvm</code>下载<code>node</code>时的镜像，这里是设置为淘宝镜像，<code>npm_mirror</code>是更改<code>npm</code>下载依赖包的镜像，也是修改为了淘宝镜像。</p><h2 id="安装-Node"><a href="#安装-Node" class="headerlink" title="安装 Node"></a>安装 Node</h2><ul><li>查看<code>nvm</code>支持安装的<code>node</code>版本</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">nvm</span> <span class="string">list</span> <span class="string">available</span></span><br></pre></td></tr></table></figure><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/image-20220517131221307.png" alt="image-20220517131221307"></p><ul><li><p>使用<code>nvm install 版本号</code>安装指定版本<code>node</code></p><p>这里需要安装的版本号在 LTS 这一列。切记要安装正确对应的版本号。如果安装没有对应的版本号，会抛出异常错误。</p><p>为了满足我司项目要求，我这里安装的版本是 14.17.3。大家可根据自身情况安装。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install 14.17.3</span><br></pre></td></tr></table></figure></li></ul><p>到此处，就在我以为万事大吉使用<code>node -v</code>的时候，提示我 node 不是内部命令。这不芭比 Q 了嘛。后来我查询了一下，原来是在初次使用<code>node</code>时，需要先使用<code>nvm use 版本号</code>切换到已安装版本的<code>node</code>才可以。</p><h2 id="切换-node-版本"><a href="#切换-node-版本" class="headerlink" title="切换 node 版本"></a>切换 node 版本</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">C:\Windows\system32&gt;nvm use 14.17.3</span><br><span class="line">Now using node v14.17.3 (64-bit)</span><br></pre></td></tr></table></figure><p>如果这里不切换，你会发现之前安装 node 的那个路径下找不到 node 文件夹。</p><ul><li>至此，可以使用<code>node -v</code> <code>npm -v</code> 来查看对应的版本号。</li></ul><h2 id="多-node-版本之间的切换"><a href="#多-node-版本之间的切换" class="headerlink" title="多 node 版本之间的切换"></a>多 node 版本之间的切换</h2><p>为了演示多版本<code>node</code>切换，我这重复上面的第 4 步，安装一个最新版本的<code>node</code> 16.15.0.</p><ul><li><p>查看当前安装的所有<code>node</code>版本</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Windows\system32&gt;nvm list</span><br></pre></td></tr></table></figure><p><code>*</code>号符表示的是当前使用的版本</p></li><li><p>切换不同版本的<code>node</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">C:\Windows\system32&gt;nvm use 14.17.3</span><br><span class="line">Now using node v14.17.3 (64-bit)</span><br></pre></td></tr></table></figure><p>这里有个小问题。就是在切换版本的时候，如果你的<code>cmd</code>没有在管理员的状态下运行的话，会出现如下所示，会导致切换版本不成功的情况。</p><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/image-20220517132814152.png" alt="image-20220517132814152"></p></li></ul><h2 id="nvm-常用指令"><a href="#nvm-常用指令" class="headerlink" title="nvm 常用指令"></a>nvm 常用指令</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">nvm off                     //禁用node.js版本管理(不卸载任何东西)</span><br><span class="line">nvm on                      //启用node.js版本管理</span><br><span class="line">nvm install &lt;version&gt;       //安装指定版本node,例如nvm install 12.18.3</span><br><span class="line">nvm uninstall &lt;version&gt;     //卸载指定版本node,例如nvm uninstall 12.18.3</span><br><span class="line">nvm list                    //显示所有安装的node.js版本</span><br><span class="line">nvm list available          //显示可以安装的所有node.js的版本(windows系统)</span><br><span class="line">nvm use &lt;version&gt;           //切换到使用指定的nodejs版本，例如nvm use 12.18.3</span><br></pre></td></tr></table></figure><h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><p>到这里，使用 nvm 安装 node 的教程就结束啦。感谢您的阅读观看，祝您岁月不惊，好运长存。</p>]]></content>
    
    
    <summary type="html">使用 node 多版本切换的初衷</summary>
    
    
    
    <category term="Node" scheme="https://axiandaytoy.cn/categories/Node/"/>
    
    
    <category term="Node" scheme="https://axiandaytoy.cn/tags/Node/"/>
    
  </entry>
  
  <entry>
    <title>React被废弃的三个生命周期函数及替代函数</title>
    <link href="https://axiandaytoy.cn/posts/e188828a/"/>
    <id>https://axiandaytoy.cn/posts/e188828a/</id>
    <published>2022-05-14T06:21:15.000Z</published>
    <updated>2022-06-26T10:10:51.145Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>学习过<code>React</code>的同学应该知道 react 生命周期函数贯穿于数组的初始化、挂载、更新、销毁的整个过程。可以说配合紧密，但是随着 react 使用的深入，在业务开发中一些声明的周期函数也会带一些严重的问题，因此官方也很快做出了修正，废弃了几个容易造成严重问题的函数，并且给出来代替的函数。</p><h2 id="react-精益求精的“弃子”"><a href="#react-精益求精的“弃子”" class="headerlink" title="react 精益求精的“弃子”"></a>react 精益求精的“弃子”</h2><ol><li>componentWillMount</li><li>componentWillUpdate</li><li>componentWillReceiveProps</li></ol><h2 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h2><blockquote><p>在 componentWillMount 进行异步请求，能使数据返回的更快。但，componentWillMount 结束后，render 会立即被触发，但此时 componentWillMount 中的异步请求结果可能还未返回。一旦结果返回就会重新 render，所以说即使在 componentWillMount 就进行了异步请求，在返回数据后又会重新 render，这会导致服务端渲染场景下的冗余请求等额外问题。得不偿失，因此在 componentDidMount 来请求没太大的差别，所以官方将它废除了。<br>假如你在 compoentWillMount 中发起了一个付款请求，由于 render 阶段里的生命周期都可以重复执行，在 componentWillMount 被打断 + 重启多次后，就会发出多个付款请求。</p></blockquote><blockquote><p>或者你可能习惯在 componentWillReceiveProps (在已挂载的组件接收到 props 之前被调用)里操作 DOM(比如删除某个符合特征的元素)，那么 componentWillReceiveProps 若是执行了两次，你可能就会一口气删掉两个符合特征的元素。</p></blockquote><blockquote><p>假如在 compoenntWillReceiveProps 和 compoentWillUpdate 里滥用 setState 将导致重复渲染死循环。</p></blockquote><h2 id="新生命周期函数"><a href="#新生命周期函数" class="headerlink" title="新生命周期函数"></a>新生命周期函数</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">constructor()</span><br><span class="line">static getDerivedStateFromProps(props,state)</span><br><span class="line">shouldComponetUpdate()</span><br><span class="line">render()</span><br><span class="line">componentDidMount()</span><br><span class="line">static getSnapshotBeforeUpdate(prevprops,prevState)</span><br><span class="line">componentDidUpdate()</span><br><span class="line">componentWillUnmount()</span><br></pre></td></tr></table></figure><h2 id="挂载前顺序"><a href="#挂载前顺序" class="headerlink" title="挂载前顺序"></a>挂载前顺序</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">constructor()</span><br><span class="line">static getDerivedStateFromProps(props,state)</span><br><span class="line">render()</span><br></pre></td></tr></table></figure><h2 id="挂载后"><a href="#挂载后" class="headerlink" title="挂载后"></a>挂载后</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">componentDidMount()</span><br></pre></td></tr></table></figure><h2 id="更新前顺序"><a href="#更新前顺序" class="headerlink" title="更新前顺序"></a>更新前顺序</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">static getSnapshotBeforeUpdate(prevprops,prevState)</span><br><span class="line">shouldComponentUpdate()</span><br><span class="line">render()</span><br></pre></td></tr></table></figure><h2 id="更新后顺序"><a href="#更新后顺序" class="headerlink" title="更新后顺序"></a>更新后顺序</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">static getSnapshotBeforeUpdate(prevprops,prevState)</span><br><span class="line">componentDidMount()</span><br></pre></td></tr></table></figure><h2 id="卸载"><a href="#卸载" class="headerlink" title="卸载"></a>卸载</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">componetWillUnmount()</span><br></pre></td></tr></table></figure><h2 id="现版本废弃的生命周期钩子函数"><a href="#现版本废弃的生命周期钩子函数" class="headerlink" title="现版本废弃的生命周期钩子函数"></a>现版本废弃的生命周期钩子函数</h2><p><img src="https://ax-images.oss-cn-beijing.aliyuncs.com/images/banner.webp"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;学习过&lt;code&gt;React&lt;/code&gt;的同学应该知道 react 生命周期函数贯穿于数组的初始化、挂载、更新、销毁的整个过程。可以说配合</summary>
      
    
    
    
    <category term="React" scheme="https://axiandaytoy.cn/categories/React/"/>
    
    
    <category term="React" scheme="https://axiandaytoy.cn/tags/React/"/>
    
  </entry>
  
</feed>
